{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/debounce/index.js","webpack:///./node_modules/delegate/src/closest.js","webpack:///./node_modules/delegate/src/delegate.js","webpack:///./node_modules/ev-emitter/ev-emitter.js","webpack:///./node_modules/imagesloaded/imagesloaded.js","webpack:///./node_modules/prismjs/prism.js","webpack:///./node_modules/pubsub-js/src/pubsub.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/js/index.js","webpack:///./src/js/modules/Animation.js","webpack:///./src/js/modules/Events.js","webpack:///./src/js/modules/Image.js","webpack:///./src/js/modules/Modal.js","webpack:///./src/js/modules/Navigation.js","webpack:///./src/js/modules/Showhide.js","webpack:///./src/js/modules/Tabs.js","webpack:///./src/js/modules/Utils.js","webpack:///./src/js/modules/Video.js","webpack:///./src/scss/screen.scss"],"names":["initialiseComponentModules","initEvents","initNav","initShowhide","initImage","initModal","initVideo","initTabs","initCarousel","setTimeout","Prism","highlightAll","tables","document","querySelectorAll","forEach","wrapper","createElement","classList","add","wrapElement","element","ready","collapseElement","sectionHeight","scrollHeight","style","height","elementTransition","transition","requestAnimationFrame","expandElement","addEventListener","expansionEnds","removeEventListener","messages","createCustomEvent","eventName","eventData","customEvent","window","CustomEvent","detail","some","bubbles","createEvent","initCustomEvent","bindGlobalMessages","PubSub","publish","scroll","onresize","debounce","resize","createGlobalMessenger","eventType","selector","message","preventBubble","delegate","body","e","preventDefault","stopPropagation","createDelegatedEventListener","eventToTrigger","target","dispatchEvent","initModule","global","selSmartImage","selClickToLoadSmartImage","selPlaceholderImage","imageLoadingClass","imageLoadedClass","imageDisplayedClass","imageFlexClass","imageHiddenClass","observerOptions","root","rootMargin","threshold","imageObserver","SmartImage","smartImageElem","placeholderImage","querySelector","loadingMethod","dataset","imageLoad","config","JSON","parse","imageConfig","imageType","type","imageReloader","reload","imageTargetSel","imageTarget","imageLoaded","imageToAdd","srcSet","IntersectionObserver","observe","bindCustomMessageEvents","subscribeToEvents","getImageFile","loadImageIfInView","pageWidth","innerWidth","imageSrcKey","key","hasOwnProperty","parseInt","image","imageAlt","alt","imageWidth","width","imageClass","class","length","src","remove","removeAttribute","updateImageAttributes","insertBefore","unobserve","path","smartImage","imageBackgroundPos","position","imageBackgroundColor","backgroundColor","backgroundImage","Events","contentChange","thisImageUrl","calculateImageBreakpointToUse","imageLoader","imagesLoaded","on","displayImageInContainer","displayImageAsBackground","layoutChange","component","parentNode","inView","loadImage","loadSmartImage","bind","reloadImage","loadSmartImageOnClick","subscribe","load","breakChange","SmartImageFactory","data","smartImages","Array","prototype","call","newSmartImage","topic","createNewSmartImageObjects","contentDisplayed","displaySmartImages","delegateEvents","initialiseSmartImages","newSmartImageFactory","handleIntersection","entries","observer","entry","intersectionRatio","initialiseImageObserver","modalTemplate","modalScreenTemplate","modalComponentSel","modalLinkSel","modalCloseSel","modalContentSel","modalScreenSel","bodyElement","getElementsByTagName","Modal","content","modalType","modalID","modal","createNodeFromHTML","modalScreen","modalContent","closeButton","appendChild","displayPageContentInModal","displaySmartImageInModal","displayContentInModal","positionModal","removeChild","closeModal","activateModal","ModalLinkManager","modalLinkContent","linkElement","modalLink","modalLinkID","getAttribute","modalLinkURL","modalMode","modalSource","innerHTML","createModal","mode","id","newModal","matches","closest","createModalContent","newModalLinkManager","selMainNav","selMainNavToggle","selMainNavToggleGlobal","selMainNavMenu","selMainNavCloseGlobal","selMainNavSecondaryMenuContainer","selMainNavSecondaryItem","menuShowHideTransitionTime","MainNavToggle","menuToggle","toggle","toggleMenu","openMenu","closeMenu","initialiseMainMenu","navToggle","newMainNavToggle","selComponent","selAction","selContent","displayClass","ShowHide","action","animate","speed","startState","open","setStartState","event","contains","Animation","toggleControl","showHideComponents","newShowHide","selTabComponent","selTabPanel","selTabControl","selTabControlGlobal","TabbedContent","tabsConfig","tabControls","tabPanels","currentIndex","currentTab","setupTabs","build","item","targetIndex","indexOfNode","updateCurrentTab","tabComponents","newTabbedContent","closestParent","el","includeSelf","parent","node","child","index","indexOf","children","htmlString","div","trim","firstChild","isElementInView","windowHeight","innerHeight","scrollTop","scrollY","elementOffset","getBoundingClientRect","elementTop","top","elementHeight","offsetHeight","outerWidth","offsetWidth","getComputedStyle","marginLeft","marginRight","outerHeight","marginTop","marginBottom","getURLQueryString","queryStringValues","hash","hashes","location","href","slice","split","i","push","decodeCharacters","text","elem","value","resetStyles","setAttribute","getOffset","elementBoundary","left","scrollX","fn","attachEvent","readyState","selInlineVideo","selInlineVideoPlayer","selInlineVideoToggle","videoObserver","InlineVideo","videoContainer","videoPlayer","videoSource","videoURL","isLoaded","isPlaying","isReached","userPause","pause","play","loadVideo","playVideo","pauseVideo","togglePlayback","initialiseVideoPlayers","inlineVideos","newInlineVideo","initialiseVideoObserver"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;ACrEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AChCA,cAAc,mBAAO,CAAC,yDAAW;;AAEjC;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,qBAAqB;AAChC,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC7EA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO,IAAyC;AAChD;AACA,IAAI,oCAAQ,OAAO;AAAA;AAAA;AAAA;AAAA,oGAAE;AACrB,GAAG,MAAM,EAMN;;AAEH,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;;;;;;AC/GD;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;;AAEA;;AAEA,OAAO,IAAyC;AAChD;AACA,IAAI,iCAAQ;AACZ,MAAM,2FAAuB;AAC7B,KAAK,mCAAE;AACP;AACA,KAAK;AAAA,oGAAC;AACN,GAAG,MAAM,EAYN;;AAEH,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,iCAAiC;AAC5C,WAAW,mBAAmB;AAC9B,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,KAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,qBAAqB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC;;;;;;;;;;;;;ACvXD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ,sCAAsC,sBAAsB;AAC5D;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,wCAAwC,oBAAoB;AAC5D;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;;AAEN;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,YAAY;;AAEZ;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,wBAAwB,yBAAyB;AACjD;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,qBAAqB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,uCAAuC,mBAAmB;;AAE1D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAmC,mEAAmE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA,SAAS;;AAET;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA,0BAA0B,2BAA2B;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,yEAAyE;AACzE,EAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;AAED,IAAI,KAA6B;AACjC;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF,uBAAuB,KAAK;AAC5B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sDAAsD;AACtD;AACA,CAAC;;AAED;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,SAAS;AACpC;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,kBAAkB,QAAQ,WAAW;AACrC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,uBAAuB;AACvB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,oBAAoB,IAAI;AACxB;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0GAA0G,EAAE;AAC5G,CAAC;;AAED;AACA;AACA,6FAA6F,IAAI,kBAAkB;AACnH;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,CAAC;;AAED;AACA;AACA,4BAA4B,GAAG,GAAG;AAClC;AACA;AACA;AACA,iBAAiB,GAAG,GAAG;AACvB;AACA;AACA,oBAAoB,EAAE;AACtB;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;;AAEA;;AAEA,CAAC,I;;;;;;;;;;;;AC12BD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,2BAA2B,eAAe,EAAE;;AAE5C;AACA,KAAK,UAAU,IAA2B;AAC1C;AACA,8CAA8C;AAC9C;AACA,gCAAgC;AAChC,0CAA0C;AAC1C;;AAEA,CAAC;AACD;;AAEA,qBAAqB;AACrB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,gBAAgB;AAChB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,gBAAgB;AAChB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,WAAW;AAC1B,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,WAAW;AAC1B,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"js/site.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \".\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","var DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n","var closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n","/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, window */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\n\"use strict\";\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice(0);\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( var i=0; i < listeners.length; i++ ) {\n    var listener = listeners[i]\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n};\n\nreturn EvEmitter;\n\n}));\n","/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( typeof window !== 'undefined' ? window : this,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n'use strict';\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  var queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = extend( {}, this.options );\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});\n","\n/* **********************************************\n     Begin prism-core.js\n********************************************** */\n\nvar _self = (typeof window !== 'undefined')\n\t? window   // if in browser\n\t: (\n\t\t(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)\n\t\t? self // if in worker\n\t\t: {}   // if in node js\n\t);\n\n/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n * MIT license http://www.opensource.org/licenses/mit-license.php/\n * @author Lea Verou http://lea.verou.me\n */\n\nvar Prism = (function(){\n\n// Private helper vars\nvar lang = /\\blang(?:uage)?-([\\w-]+)\\b/i;\nvar uniqueId = 0;\n\nvar _ = _self.Prism = {\n\tmanual: _self.Prism && _self.Prism.manual,\n\tdisableWorkerMessageHandler: _self.Prism && _self.Prism.disableWorkerMessageHandler,\n\tutil: {\n\t\tencode: function (tokens) {\n\t\t\tif (tokens instanceof Token) {\n\t\t\t\treturn new Token(tokens.type, _.util.encode(tokens.content), tokens.alias);\n\t\t\t} else if (_.util.type(tokens) === 'Array') {\n\t\t\t\treturn tokens.map(_.util.encode);\n\t\t\t} else {\n\t\t\t\treturn tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n\t\t\t}\n\t\t},\n\n\t\ttype: function (o) {\n\t\t\treturn Object.prototype.toString.call(o).match(/\\[object (\\w+)\\]/)[1];\n\t\t},\n\n\t\tobjId: function (obj) {\n\t\t\tif (!obj['__id']) {\n\t\t\t\tObject.defineProperty(obj, '__id', { value: ++uniqueId });\n\t\t\t}\n\t\t\treturn obj['__id'];\n\t\t},\n\n\t\t// Deep clone a language definition (e.g. to extend it)\n\t\tclone: function (o, visited) {\n\t\t\tvar type = _.util.type(o);\n\t\t\tvisited = visited || {};\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'Object':\n\t\t\t\t\tif (visited[_.util.objId(o)]) {\n\t\t\t\t\t\treturn visited[_.util.objId(o)];\n\t\t\t\t\t}\n\t\t\t\t\tvar clone = {};\n\t\t\t\t\tvisited[_.util.objId(o)] = clone;\n\n\t\t\t\t\tfor (var key in o) {\n\t\t\t\t\t\tif (o.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tclone[key] = _.util.clone(o[key], visited);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn clone;\n\n\t\t\t\tcase 'Array':\n\t\t\t\t\tif (visited[_.util.objId(o)]) {\n\t\t\t\t\t\treturn visited[_.util.objId(o)];\n\t\t\t\t\t}\n\t\t\t\t\tvar clone = [];\n\t\t\t\t\tvisited[_.util.objId(o)] = clone;\n\n\t\t\t\t\to.forEach(function (v, i) {\n\t\t\t\t\t\tclone[i] = _.util.clone(v, visited);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn clone;\n\t\t\t}\n\n\t\t\treturn o;\n\t\t}\n\t},\n\n\tlanguages: {\n\t\textend: function (id, redef) {\n\t\t\tvar lang = _.util.clone(_.languages[id]);\n\n\t\t\tfor (var key in redef) {\n\t\t\t\tlang[key] = redef[key];\n\t\t\t}\n\n\t\t\treturn lang;\n\t\t},\n\n\t\t/**\n\t\t * Insert a token before another token in a language literal\n\t\t * As this needs to recreate the object (we cannot actually insert before keys in object literals),\n\t\t * we cannot just provide an object, we need anobject and a key.\n\t\t * @param inside The key (or language id) of the parent\n\t\t * @param before The key to insert before. If not provided, the function appends instead.\n\t\t * @param insert Object with the key/value pairs to insert\n\t\t * @param root The object that contains `inside`. If equal to Prism.languages, it can be omitted.\n\t\t */\n\t\tinsertBefore: function (inside, before, insert, root) {\n\t\t\troot = root || _.languages;\n\t\t\tvar grammar = root[inside];\n\n\t\t\tif (arguments.length == 2) {\n\t\t\t\tinsert = arguments[1];\n\n\t\t\t\tfor (var newToken in insert) {\n\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\n\t\t\t\t\t\tgrammar[newToken] = insert[newToken];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn grammar;\n\t\t\t}\n\n\t\t\tvar ret = {};\n\n\t\t\tfor (var token in grammar) {\n\n\t\t\t\tif (grammar.hasOwnProperty(token)) {\n\n\t\t\t\t\tif (token == before) {\n\n\t\t\t\t\t\tfor (var newToken in insert) {\n\n\t\t\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\n\t\t\t\t\t\t\t\tret[newToken] = insert[newToken];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tret[token] = grammar[token];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update references in other language definitions\n\t\t\t_.languages.DFS(_.languages, function(key, value) {\n\t\t\t\tif (value === root[inside] && key != inside) {\n\t\t\t\t\tthis[key] = ret;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn root[inside] = ret;\n\t\t},\n\n\t\t// Traverse a language definition with Depth First Search\n\t\tDFS: function(o, callback, type, visited) {\n\t\t\tvisited = visited || {};\n\t\t\tfor (var i in o) {\n\t\t\t\tif (o.hasOwnProperty(i)) {\n\t\t\t\t\tcallback.call(o, i, o[i], type || i);\n\n\t\t\t\t\tif (_.util.type(o[i]) === 'Object' && !visited[_.util.objId(o[i])]) {\n\t\t\t\t\t\tvisited[_.util.objId(o[i])] = true;\n\t\t\t\t\t\t_.languages.DFS(o[i], callback, null, visited);\n\t\t\t\t\t}\n\t\t\t\t\telse if (_.util.type(o[i]) === 'Array' && !visited[_.util.objId(o[i])]) {\n\t\t\t\t\t\tvisited[_.util.objId(o[i])] = true;\n\t\t\t\t\t\t_.languages.DFS(o[i], callback, i, visited);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tplugins: {},\n\n\thighlightAll: function(async, callback) {\n\t\t_.highlightAllUnder(document, async, callback);\n\t},\n\n\thighlightAllUnder: function(container, async, callback) {\n\t\tvar env = {\n\t\t\tcallback: callback,\n\t\t\tselector: 'code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code'\n\t\t};\n\n\t\t_.hooks.run(\"before-highlightall\", env);\n\n\t\tvar elements = env.elements || container.querySelectorAll(env.selector);\n\n\t\tfor (var i=0, element; element = elements[i++];) {\n\t\t\t_.highlightElement(element, async === true, env.callback);\n\t\t}\n\t},\n\n\thighlightElement: function(element, async, callback) {\n\t\t// Find language\n\t\tvar language, grammar, parent = element;\n\n\t\twhile (parent && !lang.test(parent.className)) {\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\tif (parent) {\n\t\t\tlanguage = (parent.className.match(lang) || [,''])[1].toLowerCase();\n\t\t\tgrammar = _.languages[language];\n\t\t}\n\n\t\t// Set language on the element, if not present\n\t\telement.className = element.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n\n\t\tif (element.parentNode) {\n\t\t\t// Set language on the parent, for styling\n\t\t\tparent = element.parentNode;\n\n\t\t\tif (/pre/i.test(parent.nodeName)) {\n\t\t\t\tparent.className = parent.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n\t\t\t}\n\t\t}\n\n\t\tvar code = element.textContent;\n\n\t\tvar env = {\n\t\t\telement: element,\n\t\t\tlanguage: language,\n\t\t\tgrammar: grammar,\n\t\t\tcode: code\n\t\t};\n\n\t\t_.hooks.run('before-sanity-check', env);\n\n\t\tif (!env.code || !env.grammar) {\n\t\t\tif (env.code) {\n\t\t\t\t_.hooks.run('before-highlight', env);\n\t\t\t\tenv.element.textContent = env.code;\n\t\t\t\t_.hooks.run('after-highlight', env);\n\t\t\t}\n\t\t\t_.hooks.run('complete', env);\n\t\t\treturn;\n\t\t}\n\n\t\t_.hooks.run('before-highlight', env);\n\n\t\tif (async && _self.Worker) {\n\t\t\tvar worker = new Worker(_.filename);\n\n\t\t\tworker.onmessage = function(evt) {\n\t\t\t\tenv.highlightedCode = evt.data;\n\n\t\t\t\t_.hooks.run('before-insert', env);\n\n\t\t\t\tenv.element.innerHTML = env.highlightedCode;\n\n\t\t\t\tcallback && callback.call(env.element);\n\t\t\t\t_.hooks.run('after-highlight', env);\n\t\t\t\t_.hooks.run('complete', env);\n\t\t\t};\n\n\t\t\tworker.postMessage(JSON.stringify({\n\t\t\t\tlanguage: env.language,\n\t\t\t\tcode: env.code,\n\t\t\t\timmediateClose: true\n\t\t\t}));\n\t\t}\n\t\telse {\n\t\t\tenv.highlightedCode = _.highlight(env.code, env.grammar, env.language);\n\n\t\t\t_.hooks.run('before-insert', env);\n\n\t\t\tenv.element.innerHTML = env.highlightedCode;\n\n\t\t\tcallback && callback.call(element);\n\n\t\t\t_.hooks.run('after-highlight', env);\n\t\t\t_.hooks.run('complete', env);\n\t\t}\n\t},\n\n\thighlight: function (text, grammar, language) {\n\t\tvar env = {\n\t\t\tcode: text,\n\t\t\tgrammar: grammar,\n\t\t\tlanguage: language\n\t\t};\n\t\t_.hooks.run('before-tokenize', env);\n\t\tenv.tokens = _.tokenize(env.code, env.grammar);\n\t\t_.hooks.run('after-tokenize', env);\n\t\treturn Token.stringify(_.util.encode(env.tokens), env.language);\n\t},\n\n\tmatchGrammar: function (text, strarr, grammar, index, startPos, oneshot, target) {\n\t\tvar Token = _.Token;\n\n\t\tfor (var token in grammar) {\n\t\t\tif(!grammar.hasOwnProperty(token) || !grammar[token]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (token == target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar patterns = grammar[token];\n\t\t\tpatterns = (_.util.type(patterns) === \"Array\") ? patterns : [patterns];\n\n\t\t\tfor (var j = 0; j < patterns.length; ++j) {\n\t\t\t\tvar pattern = patterns[j],\n\t\t\t\t\tinside = pattern.inside,\n\t\t\t\t\tlookbehind = !!pattern.lookbehind,\n\t\t\t\t\tgreedy = !!pattern.greedy,\n\t\t\t\t\tlookbehindLength = 0,\n\t\t\t\t\talias = pattern.alias;\n\n\t\t\t\tif (greedy && !pattern.pattern.global) {\n\t\t\t\t\t// Without the global flag, lastIndex won't work\n\t\t\t\t\tvar flags = pattern.pattern.toString().match(/[imuy]*$/)[0];\n\t\t\t\t\tpattern.pattern = RegExp(pattern.pattern.source, flags + \"g\");\n\t\t\t\t}\n\n\t\t\t\tpattern = pattern.pattern || pattern;\n\n\t\t\t\t// Don’t cache length as it changes during the loop\n\t\t\t\tfor (var i = index, pos = startPos; i < strarr.length; pos += strarr[i].length, ++i) {\n\n\t\t\t\t\tvar str = strarr[i];\n\n\t\t\t\t\tif (strarr.length > text.length) {\n\t\t\t\t\t\t// Something went terribly wrong, ABORT, ABORT!\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (str instanceof Token) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (greedy && i != strarr.length - 1) {\n\t\t\t\t\t\tpattern.lastIndex = pos;\n\t\t\t\t\t\tvar match = pattern.exec(text);\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar from = match.index + (lookbehind ? match[1].length : 0),\n\t\t\t\t\t\t    to = match.index + match[0].length,\n\t\t\t\t\t\t    k = i,\n\t\t\t\t\t\t    p = pos;\n\n\t\t\t\t\t\tfor (var len = strarr.length; k < len && (p < to || (!strarr[k].type && !strarr[k - 1].greedy)); ++k) {\n\t\t\t\t\t\t\tp += strarr[k].length;\n\t\t\t\t\t\t\t// Move the index i to the element in strarr that is closest to from\n\t\t\t\t\t\t\tif (from >= p) {\n\t\t\t\t\t\t\t\t++i;\n\t\t\t\t\t\t\t\tpos = p;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If strarr[i] is a Token, then the match starts inside another Token, which is invalid\n\t\t\t\t\t\tif (strarr[i] instanceof Token) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Number of tokens to delete and replace with the new match\n\t\t\t\t\t\tdelNum = k - i;\n\t\t\t\t\t\tstr = text.slice(pos, p);\n\t\t\t\t\t\tmatch.index -= pos;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpattern.lastIndex = 0;\n\n\t\t\t\t\t\tvar match = pattern.exec(str),\n\t\t\t\t\t\t\tdelNum = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!match) {\n\t\t\t\t\t\tif (oneshot) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(lookbehind) {\n\t\t\t\t\t\tlookbehindLength = match[1] ? match[1].length : 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar from = match.index + lookbehindLength,\n\t\t\t\t\t    match = match[0].slice(lookbehindLength),\n\t\t\t\t\t    to = from + match.length,\n\t\t\t\t\t    before = str.slice(0, from),\n\t\t\t\t\t    after = str.slice(to);\n\n\t\t\t\t\tvar args = [i, delNum];\n\n\t\t\t\t\tif (before) {\n\t\t\t\t\t\t++i;\n\t\t\t\t\t\tpos += before.length;\n\t\t\t\t\t\targs.push(before);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar wrapped = new Token(token, inside? _.tokenize(match, inside) : match, alias, match, greedy);\n\n\t\t\t\t\targs.push(wrapped);\n\n\t\t\t\t\tif (after) {\n\t\t\t\t\t\targs.push(after);\n\t\t\t\t\t}\n\n\t\t\t\t\tArray.prototype.splice.apply(strarr, args);\n\n\t\t\t\t\tif (delNum != 1)\n\t\t\t\t\t\t_.matchGrammar(text, strarr, grammar, i, pos, true, token);\n\n\t\t\t\t\tif (oneshot)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\ttokenize: function(text, grammar, language) {\n\t\tvar strarr = [text];\n\n\t\tvar rest = grammar.rest;\n\n\t\tif (rest) {\n\t\t\tfor (var token in rest) {\n\t\t\t\tgrammar[token] = rest[token];\n\t\t\t}\n\n\t\t\tdelete grammar.rest;\n\t\t}\n\n\t\t_.matchGrammar(text, strarr, grammar, 0, 0, false);\n\n\t\treturn strarr;\n\t},\n\n\thooks: {\n\t\tall: {},\n\n\t\tadd: function (name, callback) {\n\t\t\tvar hooks = _.hooks.all;\n\n\t\t\thooks[name] = hooks[name] || [];\n\n\t\t\thooks[name].push(callback);\n\t\t},\n\n\t\trun: function (name, env) {\n\t\t\tvar callbacks = _.hooks.all[name];\n\n\t\t\tif (!callbacks || !callbacks.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var i=0, callback; callback = callbacks[i++];) {\n\t\t\t\tcallback(env);\n\t\t\t}\n\t\t}\n\t}\n};\n\nvar Token = _.Token = function(type, content, alias, matchedStr, greedy) {\n\tthis.type = type;\n\tthis.content = content;\n\tthis.alias = alias;\n\t// Copy of the full string this token was created from\n\tthis.length = (matchedStr || \"\").length|0;\n\tthis.greedy = !!greedy;\n};\n\nToken.stringify = function(o, language, parent) {\n\tif (typeof o == 'string') {\n\t\treturn o;\n\t}\n\n\tif (_.util.type(o) === 'Array') {\n\t\treturn o.map(function(element) {\n\t\t\treturn Token.stringify(element, language, o);\n\t\t}).join('');\n\t}\n\n\tvar env = {\n\t\ttype: o.type,\n\t\tcontent: Token.stringify(o.content, language, parent),\n\t\ttag: 'span',\n\t\tclasses: ['token', o.type],\n\t\tattributes: {},\n\t\tlanguage: language,\n\t\tparent: parent\n\t};\n\n\tif (o.alias) {\n\t\tvar aliases = _.util.type(o.alias) === 'Array' ? o.alias : [o.alias];\n\t\tArray.prototype.push.apply(env.classes, aliases);\n\t}\n\n\t_.hooks.run('wrap', env);\n\n\tvar attributes = Object.keys(env.attributes).map(function(name) {\n\t\treturn name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\n\t}).join(' ');\n\n\treturn '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + (attributes ? ' ' + attributes : '') + '>' + env.content + '</' + env.tag + '>';\n\n};\n\nif (!_self.document) {\n\tif (!_self.addEventListener) {\n\t\t// in Node.js\n\t\treturn _self.Prism;\n\t}\n\n\tif (!_.disableWorkerMessageHandler) {\n\t\t// In worker\n\t\t_self.addEventListener('message', function (evt) {\n\t\t\tvar message = JSON.parse(evt.data),\n\t\t\t\tlang = message.language,\n\t\t\t\tcode = message.code,\n\t\t\t\timmediateClose = message.immediateClose;\n\n\t\t\t_self.postMessage(_.highlight(code, _.languages[lang], lang));\n\t\t\tif (immediateClose) {\n\t\t\t\t_self.close();\n\t\t\t}\n\t\t}, false);\n\t}\n\n\treturn _self.Prism;\n}\n\n//Get current script and highlight\nvar script = document.currentScript || [].slice.call(document.getElementsByTagName(\"script\")).pop();\n\nif (script) {\n\t_.filename = script.src;\n\n\tif (!_.manual && !script.hasAttribute('data-manual')) {\n\t\tif(document.readyState !== \"loading\") {\n\t\t\tif (window.requestAnimationFrame) {\n\t\t\t\twindow.requestAnimationFrame(_.highlightAll);\n\t\t\t} else {\n\t\t\t\twindow.setTimeout(_.highlightAll, 16);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdocument.addEventListener('DOMContentLoaded', _.highlightAll);\n\t\t}\n\t}\n}\n\nreturn _self.Prism;\n\n})();\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = Prism;\n}\n\n// hack for components to work correctly in node.js\nif (typeof global !== 'undefined') {\n\tglobal.Prism = Prism;\n}\n\n\n/* **********************************************\n     Begin prism-markup.js\n********************************************** */\n\nPrism.languages.markup = {\n\t'comment': /<!--[\\s\\S]*?-->/,\n\t'prolog': /<\\?[\\s\\S]+?\\?>/,\n\t'doctype': /<!DOCTYPE[\\s\\S]+?>/i,\n\t'cdata': /<!\\[CDATA\\[[\\s\\S]*?]]>/i,\n\t'tag': {\n\t\tpattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s+[^\\s>\\/=]+(?:=(?:(\"|')(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])*\\1|[^\\s'\">=]+))?)*\\s*\\/?>/i,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'tag': {\n\t\t\t\tpattern: /^<\\/?[^\\s>\\/]+/i,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /^<\\/?/,\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t},\n\t\t\t'attr-value': {\n\t\t\t\tpattern: /=(?:(\"|')(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])*\\1|[^\\s'\">=]+)/i,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t/^=/,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /(^|[^\\\\])[\"']/,\n\t\t\t\t\t\t\tlookbehind: true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\t'punctuation': /\\/?>/,\n\t\t\t'attr-name': {\n\t\t\t\tpattern: /[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\t'entity': /&#?[\\da-z]{1,8};/i\n};\n\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] =\n\tPrism.languages.markup['entity'];\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function(env) {\n\n\tif (env.type === 'entity') {\n\t\tenv.attributes['title'] = env.content.replace(/&amp;/, '&');\n\t}\n});\n\nPrism.languages.xml = Prism.languages.markup;\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\n\n\n/* **********************************************\n     Begin prism-css.js\n********************************************** */\n\nPrism.languages.css = {\n\t'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n\t'atrule': {\n\t\tpattern: /@[\\w-]+?.*?(?:;|(?=\\s*\\{))/i,\n\t\tinside: {\n\t\t\t'rule': /@[\\w-]+/\n\t\t\t// See rest below\n\t\t}\n\t},\n\t'url': /url\\((?:([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1|.*?)\\)/i,\n\t'selector': /[^{}\\s][^{};]*?(?=\\s*\\{)/,\n\t'string': {\n\t\tpattern: /(\"|')(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n\t\tgreedy: true\n\t},\n\t'property': /[-_a-z\\xA0-\\uFFFF][-\\w\\xA0-\\uFFFF]*(?=\\s*:)/i,\n\t'important': /\\B!important\\b/i,\n\t'function': /[-a-z0-9]+(?=\\()/i,\n\t'punctuation': /[(){};:]/\n};\n\nPrism.languages.css['atrule'].inside.rest = Prism.languages.css;\n\nif (Prism.languages.markup) {\n\tPrism.languages.insertBefore('markup', 'tag', {\n\t\t'style': {\n\t\t\tpattern: /(<style[\\s\\S]*?>)[\\s\\S]*?(?=<\\/style>)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.css,\n\t\t\talias: 'language-css',\n\t\t\tgreedy: true\n\t\t}\n\t});\n\n\tPrism.languages.insertBefore('inside', 'attr-value', {\n\t\t'style-attr': {\n\t\t\tpattern: /\\s*style=(\"|')(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])*\\1/i,\n\t\t\tinside: {\n\t\t\t\t'attr-name': {\n\t\t\t\t\tpattern: /^\\s*style/i,\n\t\t\t\t\tinside: Prism.languages.markup.tag.inside\n\t\t\t\t},\n\t\t\t\t'punctuation': /^\\s*=\\s*['\"]|['\"]\\s*$/,\n\t\t\t\t'attr-value': {\n\t\t\t\t\tpattern: /.+/i,\n\t\t\t\t\tinside: Prism.languages.css\n\t\t\t\t}\n\t\t\t},\n\t\t\talias: 'language-css'\n\t\t}\n\t}, Prism.languages.markup.tag);\n}\n\n/* **********************************************\n     Begin prism-clike.js\n********************************************** */\n\nPrism.languages.clike = {\n\t'comment': [\n\t\t{\n\t\t\tpattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n\t\t\tlookbehind: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^\\\\:])\\/\\/.*/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t}\n\t],\n\t'string': {\n\t\tpattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n\t\tgreedy: true\n\t},\n\t'class-name': {\n\t\tpattern: /((?:\\b(?:class|interface|extends|implements|trait|instanceof|new)\\s+)|(?:catch\\s+\\())[\\w.\\\\]+/i,\n\t\tlookbehind: true,\n\t\tinside: {\n\t\t\tpunctuation: /[.\\\\]/\n\t\t}\n\t},\n\t'keyword': /\\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\b/,\n\t'boolean': /\\b(?:true|false)\\b/,\n\t'function': /[a-z0-9_]+(?=\\()/i,\n\t'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+\\.?\\d*|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n\t'operator': /--?|\\+\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\|\\|?|\\?|\\*|\\/|~|\\^|%/,\n\t'punctuation': /[{}[\\];(),.:]/\n};\n\n\n/* **********************************************\n     Begin prism-javascript.js\n********************************************** */\n\nPrism.languages.javascript = Prism.languages.extend('clike', {\n\t'keyword': /\\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\\b/,\n\t'number': /\\b(?:0[xX][\\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|NaN|Infinity)\\b|(?:\\b\\d+\\.?\\d*|\\B\\.\\d+)(?:[Ee][+-]?\\d+)?/,\n\t// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n\t'function': /[_$a-z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\s*\\()/i,\n\t'operator': /-[-=]?|\\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\\|[|=]?|\\*\\*?=?|\\/=?|~|\\^=?|%=?|\\?|\\.{3}/\n});\n\nPrism.languages.insertBefore('javascript', 'keyword', {\n\t'regex': {\n\t\tpattern: /((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s])\\s*)\\/(\\[[^\\]\\r\\n]+]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[gimyu]{0,5}(?=\\s*($|[\\r\\n,.;})\\]]))/,\n\t\tlookbehind: true,\n\t\tgreedy: true\n\t},\n\t// This must be declared before keyword because we use \"function\" inside the look-forward\n\t'function-variable': {\n\t\tpattern: /[_$a-z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*(?=\\s*=\\s*(?:function\\b|(?:\\([^()]*\\)|[_$a-z\\xA0-\\uFFFF][$\\w\\xA0-\\uFFFF]*)\\s*=>))/i,\n\t\talias: 'function'\n\t},\n\t'constant': /\\b[A-Z][A-Z\\d_]*\\b/\n});\n\nPrism.languages.insertBefore('javascript', 'string', {\n\t'template-string': {\n\t\tpattern: /`(?:\\\\[\\s\\S]|\\${[^}]+}|[^\\\\`])*`/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'interpolation': {\n\t\t\t\tpattern: /\\${[^}]+}/,\n\t\t\t\tinside: {\n\t\t\t\t\t'interpolation-punctuation': {\n\t\t\t\t\t\tpattern: /^\\${|}$/,\n\t\t\t\t\t\talias: 'punctuation'\n\t\t\t\t\t},\n\t\t\t\t\trest: null // See below\n\t\t\t\t}\n\t\t\t},\n\t\t\t'string': /[\\s\\S]+/\n\t\t}\n\t}\n});\nPrism.languages.javascript['template-string'].inside['interpolation'].inside.rest = Prism.languages.javascript;\n\nif (Prism.languages.markup) {\n\tPrism.languages.insertBefore('markup', 'tag', {\n\t\t'script': {\n\t\t\tpattern: /(<script[\\s\\S]*?>)[\\s\\S]*?(?=<\\/script>)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript,\n\t\t\talias: 'language-javascript',\n\t\t\tgreedy: true\n\t\t}\n\t});\n}\n\nPrism.languages.js = Prism.languages.javascript;\n\n\n/* **********************************************\n     Begin prism-file-highlight.js\n********************************************** */\n\n(function () {\n\tif (typeof self === 'undefined' || !self.Prism || !self.document || !document.querySelector) {\n\t\treturn;\n\t}\n\n\tself.Prism.fileHighlight = function() {\n\n\t\tvar Extensions = {\n\t\t\t'js': 'javascript',\n\t\t\t'py': 'python',\n\t\t\t'rb': 'ruby',\n\t\t\t'ps1': 'powershell',\n\t\t\t'psm1': 'powershell',\n\t\t\t'sh': 'bash',\n\t\t\t'bat': 'batch',\n\t\t\t'h': 'c',\n\t\t\t'tex': 'latex'\n\t\t};\n\n\t\tArray.prototype.slice.call(document.querySelectorAll('pre[data-src]')).forEach(function (pre) {\n\t\t\tvar src = pre.getAttribute('data-src');\n\n\t\t\tvar language, parent = pre;\n\t\t\tvar lang = /\\blang(?:uage)?-([\\w-]+)\\b/i;\n\t\t\twhile (parent && !lang.test(parent.className)) {\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\n\t\t\tif (parent) {\n\t\t\t\tlanguage = (pre.className.match(lang) || [, ''])[1];\n\t\t\t}\n\n\t\t\tif (!language) {\n\t\t\t\tvar extension = (src.match(/\\.(\\w+)$/) || [, ''])[1];\n\t\t\t\tlanguage = Extensions[extension] || extension;\n\t\t\t}\n\n\t\t\tvar code = document.createElement('code');\n\t\t\tcode.className = 'language-' + language;\n\n\t\t\tpre.textContent = '';\n\n\t\t\tcode.textContent = 'Loading…';\n\n\t\t\tpre.appendChild(code);\n\n\t\t\tvar xhr = new XMLHttpRequest();\n\n\t\t\txhr.open('GET', src, true);\n\n\t\t\txhr.onreadystatechange = function () {\n\t\t\t\tif (xhr.readyState == 4) {\n\n\t\t\t\t\tif (xhr.status < 400 && xhr.responseText) {\n\t\t\t\t\t\tcode.textContent = xhr.responseText;\n\n\t\t\t\t\t\tPrism.highlightElement(code);\n\t\t\t\t\t}\n\t\t\t\t\telse if (xhr.status >= 400) {\n\t\t\t\t\t\tcode.textContent = '✖ Error ' + xhr.status + ' while fetching file: ' + xhr.statusText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcode.textContent = '✖ Error: File does not exist or is empty';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.send(null);\n\t\t});\n\n\t\tif (Prism.plugins.toolbar) {\n\t\t\tPrism.plugins.toolbar.registerButton('download-file', function (env) {\n\t\t\t\tvar pre = env.element.parentNode;\n\t\t\t\tif (!pre || !/pre/i.test(pre.nodeName) || !pre.hasAttribute('data-src') || !pre.hasAttribute('data-download-link')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar src = pre.getAttribute('data-src');\n\t\t\t\tvar a = document.createElement('a');\n\t\t\t\ta.textContent = pre.getAttribute('data-download-link-label') || 'Download';\n\t\t\t\ta.setAttribute('download', '');\n\t\t\t\ta.href = src;\n\t\t\t\treturn a;\n\t\t\t});\n\t\t}\n\n\t};\n\n\tdocument.addEventListener('DOMContentLoaded', self.Prism.fileHighlight);\n\n})();","/**\n * Copyright (c) 2010,2011,2012,2013,2014 Morgan Roderick http://roderick.dk\n * License: MIT - http://mrgnrdrck.mit-license.org\n *\n * https://github.com/mroderick/PubSubJS\n */\n\n(function (root, factory){\n    'use strict';\n\n    var PubSub = {};\n    root.PubSub = PubSub;\n\n    var define = root.define;\n\n    factory(PubSub);\n\n    // AMD support\n    if (typeof define === 'function' && define.amd){\n        define(function() { return PubSub; });\n\n        // CommonJS and Node.js module support\n    } else if (typeof exports === 'object'){\n        if (module !== undefined && module.exports) {\n            exports = module.exports = PubSub; // Node.js specific `module.exports`\n        }\n        exports.PubSub = PubSub; // CommonJS module 1.1.1 spec\n        module.exports = exports = PubSub; // CommonJS\n    }\n\n}(( typeof window === 'object' && window ) || this, function (PubSub){\n    'use strict';\n\n    var messages = {},\n        lastUid = -1;\n\n    function hasKeys(obj){\n        var key;\n\n        for (key in obj){\n            if ( obj.hasOwnProperty(key) ){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Returns a function that throws the passed exception, for use as argument for setTimeout\n     * @alias throwException\n     * @function\n     * @param { Object } ex An Error object\n     */\n    function throwException( ex ){\n        return function reThrowException(){\n            throw ex;\n        };\n    }\n\n    function callSubscriberWithDelayedExceptions( subscriber, message, data ){\n        try {\n            subscriber( message, data );\n        } catch( ex ){\n            setTimeout( throwException( ex ), 0);\n        }\n    }\n\n    function callSubscriberWithImmediateExceptions( subscriber, message, data ){\n        subscriber( message, data );\n    }\n\n    function deliverMessage( originalMessage, matchedMessage, data, immediateExceptions ){\n        var subscribers = messages[matchedMessage],\n            callSubscriber = immediateExceptions ? callSubscriberWithImmediateExceptions : callSubscriberWithDelayedExceptions,\n            s;\n\n        if ( !messages.hasOwnProperty( matchedMessage ) ) {\n            return;\n        }\n\n        for (s in subscribers){\n            if ( subscribers.hasOwnProperty(s)){\n                callSubscriber( subscribers[s], originalMessage, data );\n            }\n        }\n    }\n\n    function createDeliveryFunction( message, data, immediateExceptions ){\n        return function deliverNamespaced(){\n            var topic = String( message ),\n                position = topic.lastIndexOf( '.' );\n\n            // deliver the message as it is now\n            deliverMessage(message, message, data, immediateExceptions);\n\n            // trim the hierarchy and deliver message to each level\n            while( position !== -1 ){\n                topic = topic.substr( 0, position );\n                position = topic.lastIndexOf('.');\n                deliverMessage( message, topic, data, immediateExceptions );\n            }\n        };\n    }\n\n    function messageHasSubscribers( message ){\n        var topic = String( message ),\n            found = Boolean(messages.hasOwnProperty( topic ) && hasKeys(messages[topic])),\n            position = topic.lastIndexOf( '.' );\n\n        while ( !found && position !== -1 ){\n            topic = topic.substr( 0, position );\n            position = topic.lastIndexOf( '.' );\n            found = Boolean(messages.hasOwnProperty( topic ) && hasKeys(messages[topic]));\n        }\n\n        return found;\n    }\n\n    function publish( message, data, sync, immediateExceptions ){\n        message = (typeof message === 'symbol') ? message.toString() : message;\n\n        var deliver = createDeliveryFunction( message, data, immediateExceptions ),\n            hasSubscribers = messageHasSubscribers( message );\n\n        if ( !hasSubscribers ){\n            return false;\n        }\n\n        if ( sync === true ){\n            deliver();\n        } else {\n            setTimeout( deliver, 0 );\n        }\n        return true;\n    }\n\n    /**\n     * Publishes the message, passing the data to it's subscribers\n     * @function\n     * @alias publish\n     * @param { String } message The message to publish\n     * @param {} data The data to pass to subscribers\n     * @return { Boolean }\n     */\n    PubSub.publish = function( message, data ){\n        return publish( message, data, false, PubSub.immediateExceptions );\n    };\n\n    /**\n     * Publishes the the message synchronously, passing the data to it's subscribers\n     * @function\n     * @alias publishSync\n     * @param { String } message The message to publish\n     * @param {} data The data to pass to subscribers\n     * @return { Boolean }\n     */\n    PubSub.publishSync = function( message, data ){\n        return publish( message, data, true, PubSub.immediateExceptions );\n    };\n\n    /**\n     * Subscribes the passed function to the passed message. Every returned token is unique and should be stored if you need to unsubscribe\n     * @function\n     * @alias subscribe\n     * @param { String } message The message to subscribe to\n     * @param { Function } func The function to call when a new message is published\n     * @return { String }\n     */\n    PubSub.subscribe = function( message, func ){\n        if ( typeof func !== 'function'){\n            return false;\n        }\n\n        message = (typeof message === 'symbol') ? message.toString() : message;\n\n        // message is not registered yet\n        if ( !messages.hasOwnProperty( message ) ){\n            messages[message] = {};\n        }\n\n        // forcing token as String, to allow for future expansions without breaking usage\n        // and allow for easy use as key names for the 'messages' object\n        var token = 'uid_' + String(++lastUid);\n        messages[message][token] = func;\n        \n        // return token for unsubscribing\n        return token;\n    };\n\n    /**\n     * Subscribes the passed function to the passed message once\n     * @function\n     * @alias subscribeOnce\n     * @param { String } message The message to subscribe to\n     * @param { Function } func The function to call when a new message is published\n     * @return { PubSub }\n     */\n    PubSub.subscribeOnce = function( message, func ){\n        var token = PubSub.subscribe( message, function(){\n            // before func apply, unsubscribe message\n            PubSub.unsubscribe( token );\n            func.apply( this, arguments );\n        });\n        return PubSub;\n    };\n\n    /**\n     * Clears all subscriptions\n     * @function\n     * @public\n     * @alias clearAllSubscriptions\n     */\n    PubSub.clearAllSubscriptions = function clearAllSubscriptions(){\n        messages = {};\n    };\n\n    /**\n     * Clear subscriptions by the topic\n     * @function\n     * @public\n     * @alias clearAllSubscriptions\n     */\n    PubSub.clearSubscriptions = function clearSubscriptions(topic){\n        var m;\n        for (m in messages){\n            if (messages.hasOwnProperty(m) && m.indexOf(topic) === 0){\n                delete messages[m];\n            }\n        }\n    };\n\n    /**\n     * Removes subscriptions\n     *\n     * - When passed a token, removes a specific subscription.\n     *\n\t * - When passed a function, removes all subscriptions for that function\n     *\n\t * - When passed a topic, removes all subscriptions for that topic (hierarchy)\n     * @function\n     * @public\n     * @alias subscribeOnce\n     * @param { String | Function } value A token, function or topic to unsubscribe from\n     * @example // Unsubscribing with a token\n     * var token = PubSub.subscribe('mytopic', myFunc);\n     * PubSub.unsubscribe(token);\n     * @example // Unsubscribing with a function\n     * PubSub.unsubscribe(myFunc);\n     * @example // Unsubscribing from a topic\n     * PubSub.unsubscribe('mytopic');\n     */\n    PubSub.unsubscribe = function(value){\n        var descendantTopicExists = function(topic) {\n                var m;\n                for ( m in messages ){\n                    if ( messages.hasOwnProperty(m) && m.indexOf(topic) === 0 ){\n                        // a descendant of the topic exists:\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n            isTopic    = typeof value === 'string' && ( messages.hasOwnProperty(value) || descendantTopicExists(value) ),\n            isToken    = !isTopic && typeof value === 'string',\n            isFunction = typeof value === 'function',\n            result = false,\n            m, message, t;\n\n        if (isTopic){\n            PubSub.clearSubscriptions(value);\n            return;\n        }\n\n        for ( m in messages ){\n            if ( messages.hasOwnProperty( m ) ){\n                message = messages[m];\n\n                if ( isToken && message[value] ){\n                    delete message[value];\n                    result = value;\n                    // tokens are unique, so we can just stop here\n                    break;\n                }\n\n                if (isFunction) {\n                    for ( t in message ){\n                        if (message.hasOwnProperty(t) && message[t] === value){\n                            delete message[t];\n                            result = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    };\n}));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","\"use strict\";\n\nimport { ready, wrapElement } from \"Modules/Utils\";\nimport { initModule as initShowhide } from \"Modules/Showhide\";\nimport { initModule as initEvents } from \"Modules/Events\";\nimport { initModule as initModal } from \"Modules/Modal\";\nimport { initModule as initImage } from \"Modules/Image\";\nimport { initModule as initVideo } from \"Modules/Video\";\nimport { initModule as initNav } from \"Modules/Navigation\";\nimport { initModule as initTabs } from \"Modules/Tabs\";\nimport { initModule as initCarousel } from \"Modules/Tabs\";\nimport Prism from 'prismjs';\n\n/** \n * initialiseComponentModules - call module init functions\n *\n * @returns {type} Description\n */ \nfunction initialiseComponentModules() {\n  initEvents();\n  initNav(); \n  initShowhide(); \n  initImage();\n  initModal();\n  initVideo();\n  initTabs();\n  initCarousel();\n\n  setTimeout(() => {\n    Prism.highlightAll();\n  }, 0);\n\n  // Wrap tables in container to allow overflow scroll\n  // This is a small enough bit of functionality to put on it's own here.\n  // But should be moved if more layout functionality warrants the creation\n  // of a Layout module\n\n  const tables = document.querySelectorAll('.tx_Prose table');\n\n  tables.forEach(element => {\n    const wrapper = document.createElement('div');\n    wrapper.classList.add('ob_Table');\n    wrapElement(element,wrapper);\n  });\n}\n\nready(initialiseComponentModules);\n","/** Animation module - functions to aid animating page elements */\n\"use strict\";\n\n//////////////////////\n// Module Functions //\n//////////////////////\n\n/**\n * collapseElement - Collapses an element by setting its height to 0.\n *\n * @param {DOMElement} element - A single DOM element\n */\nexport function collapseElement(element) {\n  // get the height of the element's inner content, regardless of its actual size\n  const sectionHeight = element.scrollHeight;\n  element.style.height = sectionHeight + \"px\";\n\n  // temporarily disable all css transitions\n  const elementTransition = element.style.transition;\n  element.style.transition = '';\n  \n  // on the next frame (as soon as the previous style change has taken effect),\n  // explicitly set the element's height to its current pixel height, so we\n  // aren't transitioning out of 'auto'\n  requestAnimationFrame(() => {\n    element.style.height = sectionHeight + 'px';\n    element.style.transition = elementTransition;\n\n    // on the next frame (as soon as the previous style change has taken effect),\n    // have the element transition to height: 0\n    requestAnimationFrame(() => {\n      element.style.height = 0 + 'px';\n    });\n  });\n}\n\n/**\n * expandElement - Expands an element with a height of 0 to its natural height by calculating this value.\n *\n * @param {DOMElement} element - A single DOM element\n */\nexport function expandElement(element) {\n  // get the height of the element's inner content, regardless of its actual size\n  var sectionHeight = element.scrollHeight;\n\n  // have the element transition to the height of its inner content\n  element.style.height = sectionHeight + 'px';\n\n  // when the next css transition finishes (which should be the one we just triggered)\n  element.addEventListener('transitionend', function expansionEnds() {\n    // remove this event listener so it only gets triggered once\n    element.removeEventListener(\"transitionend\", expansionEnds);\n    // remove \"height\" from the element's inline styles, so it can return to its initial value\n    element.style.height = null;\n  });\n}\n\nexport default {\n  collapseElement: collapseElement,\n  expandElement: expandElement\n}","////////////////////\n// Module Imports //\n////////////////////\n\"use strict\";\n\nimport debounce from \"debounce\";\nimport delegate from \"delegate\";\nimport PubSub from \"pubsub-js\";\n\n//////////////////////\n// Module Constants //\n//////////////////////\n\n/**\n * Object containing global message strings\n * @constant\n */\nexport const messages = {\n  \"resize\": \"page/resize\",\n  \"scroll\": \"page/scroll\",\n  \"load\": \"page/load\",\n  \"contentChange\": \"page-content/change\",\n  \"contentDisplayed\": \"page-content/displayed\",\n  \"layoutChange\": \"layout/change\",\n  \"breakChange\" : \"breakpoint/change\",\n  \"imageLoaded\" : \"image/loaded\"\n}\n\n/////////////////////////\n// Classes & Functions //\n/////////////////////////\n\n/**\n * createCustomEvent - Returns a custom event object\n *\n * @param {string} eventName Name of the custom event\n * @param {object} eventData Associated data passed through as part of the event object\n *\n * @returns {object} Custom Event object\n */\nfunction createCustomEvent(eventName, eventData) {\n  let customEvent;\n\n  if (window.CustomEvent) {\n    customEvent = new CustomEvent(eventName, {detail: {some: eventData}, bubbles: true});\n  } else {\n    customEvent = document.createEvent('CustomEvent');\n    customEvent.initCustomEvent(eventName, true, true, {some: eventData});\n  }\n\n  return customEvent;\n}\n\n/**\n * bindGlobalMessages - Binds event listeners to global browser events and fires global messages in response\n *\n * @returns {type} Description\n */\nfunction bindGlobalMessages() {\n  // Handle page scroll\n  window.addEventListener('scroll', function() {\n    // Publish global message\n    PubSub.publish(messages.scroll);\n  });\n\n  // Handle debounced resize\n  window.onresize = debounce(function() {\n    // Publish global  message\n    PubSub.publish(messages.resize);\n  }, 200);\n}\n\n\n/**\n * createGlobalMessenger\n *\n * @export\n * @param {string} eventType\n * @param {string} selector\n * @param {string} message\n * @param {boolean} preventBubble\n */\nexport function createGlobalMessenger(eventType, selector, message, preventBubble) {\n  delegate(document.body, selector, eventType, (e) => {\n    if(preventBubble) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    \n    PubSub.publish(message, e);\n  }, false);\n}\n\n/**\n * createDelegatedEventListener - Simple factory function to bind a common delegated event listener to the <body> element\n *\n * @param {string} eventType      the event type we're listening for\n * @param {string} selector       the selector for the element event is triggered on\n * @param {string} eventToTrigger custom event we want to send back to target element\n */\nexport function createDelegatedEventListener(eventType, selector, eventToTrigger) {\n  delegate(document.body, selector, eventType, (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    let customEvent = createCustomEvent(eventToTrigger, null);\n    e.target.dispatchEvent(customEvent);\n  }, false);\n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  bindGlobalMessages();\n}\n\nexport default {\n  initModule: initModule,\n  messages:messages,\n  delegate:createDelegatedEventListener,\n  global: createGlobalMessenger,\n  createCustomEvent:createCustomEvent,\n}\n","// Image Components module\n\"use strict\";\n\n////////////////////\n// Module Imports //\n////////////////////\n\nimport PubSub from \"pubsub-js\";\nimport imagesLoaded from \"imagesloaded\";\n\nimport Events from \"Modules/Events\";\nimport { isElementInView as inView } from \"Modules/Utils\";\n\n//////////////////////\n// Module Constants //\n//////////////////////\n\n// Selectors\nconst selSmartImage = \"[data-image-load]\";\nconst selClickToLoadSmartImage = \"[data-image-load=click] img.placeholder\";\nconst selPlaceholderImage = \"img\";\n\n// Classes\nconst imageLoadingClass = \"ob_Media--loading\";\nconst imageLoadedClass = \"ob_Media--loaded\";\nconst imageDisplayedClass = \"ob_Media--displayed\";\nconst imageFlexClass = \"ob_Media--flex\";\nconst imageHiddenClass = \"ob_Media--isHidden\";\n\n// Image Observer\nconst observerOptions  = {\n  root: null,\n  rootMargin: \"0px\",\n  threshold: 0\n};\n\nlet imageObserver;\n\n////////////////////////////////\n// Module Classes & Functions //\n////////////////////////////////\n\n/**\n * SmartImage - Class representing a Smart Image component that loads optimised images based on screen size\n */\nclass SmartImage {\n  constructor(element) {\n    // Set properties\n    this.smartImageElem = element;\n    this.placeholderImage = this.smartImageElem.querySelector(selPlaceholderImage);\n    this.loadingMethod = this.smartImageElem.dataset.imageLoad;\n    this.config = JSON.parse(this.smartImageElem.dataset.imageConfig);\n    this.imageType = this.config.type || false;\n    this.imageReloader = this.config.reload || false;\n    this.imageTargetSel = this.smartImageElem.dataset.imageTarget || null;\n    this.imageLoaded = false;\n    this.imageToAdd = document.createElement(\"img\");\n    this.srcSet = JSON.parse(this.smartImageElem.dataset.srcSet) || {};\n\n    // Add Image Element to observer\n    if(this.loadingMethod === 'view') {\n      if (typeof (window.IntersectionObserver) !== 'undefined') {\n        imageObserver.observe(this.smartImageElem);\n      }\n    }\n\n    // Call initial methods\n    this.bindCustomMessageEvents();\n    this.subscribeToEvents();\n\n    if (this.loadingMethod === \"pageload\") {\n      this.getImageFile();\n    } else if (this.loadingMethod === \"view\") {\n      this.loadImageIfInView();\n    }\n  }\n\n  /**\n   * calculateImageBreakpointToUse - Description\n   *\n   * @returns {string} Description\n   */\n  calculateImageBreakpointToUse() {\n    const pageWidth = window.innerWidth;\n    let imageSrcKey = \"max\";\n\n    for (let key in this.srcSet) {\n      if (this.srcSet.hasOwnProperty(key)) {\n        // If the current key is not 'max' check that the page width is less than it,\n        // and it is less than the current value for imageSrcKey\n        if (key !== \"max\") {\n          // If imageSrcKey is not set to 'max' check if the key\n          // is greater or equal than the page width and also if it\n          // is less than the current value of imageSrcKey\n          if (imageSrcKey !== \"max\") {\n            if (parseInt(key) >= pageWidth && parseInt(key) < imageSrcKey) {\n              imageSrcKey = key;\n            }\n          } else {\n            // If imageSrcKey is still set to 'max' just check if the key\n            // is greater or equal than the page width\n            if (parseInt(key) > pageWidth) {\n              imageSrcKey = key;\n            }\n          }\n        }\n      }\n    }\n\n    return imageSrcKey;\n  }\n\n  /**\n   * updateImageAttributes - Description\n   *\n   * @param {Element} image <img> html element\n   *\n   */\n  updateImageAttributes(image) {\n    const imageAlt = this.smartImageElem.dataset.alt || \"image\";\n    const imageWidth = this.smartImageElem.dataset.width;\n    const imageClass = this.smartImageElem.dataset.class;\n\n    if (imageAlt.length > 0) {\n      image.alt = imageAlt;\n    }\n\n    if (imageWidth) {\n      image.width = imageWidth;\n    }\n\n    if (imageClass) {\n      image.classList.add(imageClass);\n    }\n  }\n\n  /**\n   * displayImageInContainer - Description\n   *\n   */\n  displayImageInContainer() {\n    // Add 'loading' class to SmartImage container\n    this.smartImageElem.classList.add(imageLoadingClass);\n\n    if (this.placeholderImage) {\n      this.placeholderImage.src = this.imageToAdd.src;\n      this.placeholderImage.classList.remove(\"placeholder\");\n      this.placeholderImage.removeAttribute(\"width\");\n      this.placeholderImage.removeAttribute(\"height\");\n\n      this.updateImageAttributes(this.placeholderImage);\n    } else {\n      this.updateImageAttributes(this.imageToAdd);\n\n      if (this.imageTargetSel !== null) {\n        //this.smartImageElem.parent().find(imageTargetSel).eq(0).append(this.imageToAdd);\n      } else {\n        this.smartImageElem.insertBefore(this.imageToAdd, null);\n      }\n      this.placeholderImage = this.imageToAdd;\n    }\n\n    this.smartImageElem.classList.add(imageLoadedClass);\n    // Need to allow browser a moment to process the addition of the image before displaying it\n    window.setTimeout(() => {\n      this.smartImageElem.classList.add(imageDisplayedClass);\n      PubSub.publish(\"content/update\");\n    }, 50);\n\n    this.imageLoaded = true;\n    imageObserver.unobserve(this.smartImageElem);\n  }\n\n  /**\n   * displayImageAsBackground - Description\n   *\n   * @param {string} path Description\n   *\n   */\n  displayImageAsBackground(path) {\n    const smartImage = \"url(\" + path + \")\";\n    const imageBackgroundPos = this.smartImageElem.dataset.position;\n    const imageBackgroundColor = this.smartImageElem.dataset.backgroundColor;\n\n    this.smartImageElem.classList.add(imageLoadedClass);\n    this.smartImageElem.style.backgroundImage = smartImage;\n    this.smartImageElem.classList.add(imageBackgroundPos);\n    this.smartImageElem.style.backgroundColor = imageBackgroundColor;\n\n    window.setTimeout(() => {\n      this.smartImageElem.classList.add(imageDisplayedClass);\n      PubSub.publish(Events.messages.contentChange);\n    }, 50);\n\n    this.imageLoaded = true;\n    imageObserver.unobserve(this.smartImageElem);\n  }\n\n  /**\n   * getImageFile - Description\n   *\n   */\n  getImageFile() {\n    const thisImageUrl = this.srcSet[this.calculateImageBreakpointToUse()];\n\n    //Site.utils.cl(\"image url: \" + thisImageUrl);\n\n    if (thisImageUrl !== \"none\") {\n      this.smartImageElem.classList.remove(\"is_Hidden\");\n      this.imageToAdd.src = thisImageUrl;\n\n      const imageLoader = imagesLoaded(this.imageToAdd);\n\n      if (this.imageType === \"inline\") {\n        imageLoader.on(\"done\", () => {\n          this.smartImageElem.classList.remove(imageLoadingClass);\n          this.displayImageInContainer(this.imageToAdd);\n        });\n      } else if (this.imageType === \"background\") {\n        // The imagesLoaded function is called for image we want to load.\n        // There is no initial callback because everything we want to do can wait\n        // until the image is fully downloaded.\n        imageLoader.on(\"done\", () => {\n          this.smartImageElem.classList.add(imageFlexClass);\n          this.displayImageAsBackground(thisImageUrl);\n        });\n      }\n    } else {\n      this.smartImageElem.classList.add(imageHiddenClass);\n    }\n\n    PubSub.publish(Events.messages.imageLoaded);\n    PubSub.publish(Events.messages.layoutChange);\n  }\n\n  /**\n   * Load and display a smart image - use this when being in view doesn't matter\n   */\n  loadImage() {\n    if (this.imageType === \"inline\") {\n      if (this.imageLoaded === false || this.imageReloader === true) {\n        this.getImageFile(this.smartImageElem);\n      }\n    } else if (this.imageType === \"background\") {\n      this.smartImageElem.classList.add(imageFlexClass);\n      if (this.imageLoaded === false || this.imageReloader === true) {\n        this.getImageFile(this.smartImageElem);\n      }\n    }\n  }\n\n  /**\n   * loadImageIfInView - Check if\n   */\n  loadImageIfInView() {\n    let component = this.smartImageElem;\n\n    if (this.imageType === \"background\") {\n      component = component.parentNode;\n    }\n\n    if ( inView(component) && (this.imageLoaded === false || this.imageReloader === true)) {\n      this.getImageFile(this.smartImageElem);\n    }\n  }\n\n  /**\n   * loadSmartImage - Description\n   *\n   * @param {event} e Description\n   */\n  loadSmartImage(e) {\n    e.preventDefault();\n\n    if (this.imageLoaded === false) {\n      this.loadImageIfInView(this.smartImageElem);\n    }\n  }\n\n  /**\n   * reloadImage - Description\n   *\n   * @param {event} e Description\n   */\n  reloadImage(e) {\n    e.preventDefault();\n\n    if (this.imageLoaded === true && this.imageReloader === true) {\n      this.getImageFile();\n    }\n  }\n\n  /**\n   * loadSmartImageOnClick - Description\n   *\n   * @param {event} e Description\n   */\n  loadSmartImageOnClick(e) { \n    e.preventDefault();\n\n    if (this.imageLoaded === false) {\n      this.loadImage(this.smartImageElem);\n    }\n  }\n\n  /**\n   * bindCustomMessageEvents - Binds custom event listeners to the Smart Image DOM Element\n   *\n   */\n  bindCustomMessageEvents() {\n    this.smartImageElem.addEventListener(\n      \"siLoad\",\n      this.loadSmartImage.bind(this)\n    );\n\n    this.smartImageElem.addEventListener(\n      \"imageInView\",\n      this.loadSmartImage.bind(this)\n    );\n    \n    this.smartImageElem.addEventListener(\n      \"siReload\",\n      this.reloadImage.bind(this)\n    );\n\n    this.smartImageElem.addEventListener(\n      \"siClickLoad\",\n      this.loadSmartImageOnClick.bind(this)\n    );\n  }\n\n  /**\n   * subscribeToEvents - Subscribes the component to global messages and sets the component's responses via internal custom events\n   *\n   */\n  subscribeToEvents() {\n    if (this.loadingMethod === \"view\") {     \n      // Fallback to scroll event detection if browser doesn't support IntersectionObserver\n      if (typeof(window.IntersectionObserver) === 'undefined') {\n        // PubSub.subscribe(Events.messages.scroll, () => {\n        //   this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siLoad\"));\n        // }); \n      }\n      \n      PubSub.subscribe(Events.messages.load, () => {\n        this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siLoad\"));\n      });\n\n      PubSub.subscribe(Events.messages.layoutChange, () => {\n        this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siLoad\"));\n      });\n    }\n\n    PubSub.subscribe(Events.messages.resize, () => {\n      this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siReload\"));\n    });\n\n    PubSub.subscribe(Events.messages.breakChange, () => {\n      this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siReload\"));\n    });\n  }\n}\n\n\nclass SmartImageFactory {\n  constructor () {\n    this.subscribeToEvents();\n  }\n\n  createNewSmartImageObjects (data) {\n    const smartImages = data.querySelectorAll(selSmartImage);\n    Array.prototype.forEach.call(smartImages, element => {\n      const newSmartImage = new SmartImage(element);\n    });\n  }\n\n  displaySmartImages () {\n    \n  }\n\n  subscribeToEvents () {\n    // On a content change, the newly-added elements are passed as parameters to a function\n    // that finds any smartImages and initialises controlling objects for each\n    PubSub.subscribe(Events.messages.contentChange, (topic, data) => {\n      this.createNewSmartImageObjects(data);\n    });\n\n    PubSub.subscribe(Events.messages.contentDisplayed, (topic, data) => {\n      this.displaySmartImages(data);\n    });\n  } \n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components managed within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selClickToLoadSmartImage, \"siClickLoad\");\n}\n\n\nfunction initialiseSmartImages() {\n  const smartImages = document.querySelectorAll(selSmartImage);\n\n  smartImages.forEach(element => {\n    const newSmartImage = new SmartImage(element);\n  });\n\n  const newSmartImageFactory = new SmartImageFactory();\n}\n\nfunction handleIntersection (entries, observer) {\n  entries.forEach(function(entry) {\n    if (entry.intersectionRatio > 0) {\n      entry.target.dispatchEvent(Events.createCustomEvent(\"imageInView\"));\n    }\n  });\n}\n\nfunction initialiseImageObserver() { \n  if (typeof (window.IntersectionObserver) !== 'undefined') {\n    imageObserver = new IntersectionObserver(handleIntersection, observerOptions);\n  }  \n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n\n  // Initialise an observer object to detect when smart image elements are in view\n  initialiseImageObserver();\n\n  // Find and initialise Show/Hide components using the ShowHide class\n  initialiseSmartImages(); \n\n}\n\nexport default { initModule: initModule };\n","// Modal Components Module\n\"use strict\";\n\nimport PubSub from \"pubsub-js\";\nimport Events from \"Modules/Events\";\nimport { createNodeFromHTML } from \"Modules/Utils\"; \n\nconst modalTemplate = `\n  <div class=\"cp_Modal\" aria-modal=\"true\">\n    <div id=\"confirmation-popup\" class=\"cp_Modal__inner\">\n      <div class=\"cp_Modal__content\">\n        <div class=\"cp_Modal__close\">\n          <a class=\"cp_Modal__closeLink\" href=\"#\" title=\"Close this modal\">Close</a>\n        </div>\n      </div>\n    </div>\n  </div>`;\n\nconst modalScreenTemplate = `<div class='cp_ModalScreen'></div>`;\n\nconst modalComponentSel = \".cp_Modal\";\nconst modalLinkSel = \"[data-modal-source]\";\nconst modalCloseSel = \".cp_Modal__closeLink\";\nconst modalContentSel = \".cp_Modal__content\";\nconst modalScreenSel = \".cp_ModalScreen\";\n\nconst bodyElement = document.getElementsByTagName('body')[0];\n\n/** \n *\n *\n * @class Modal\n */\nclass Modal {\n\n  /**\n   *Creates an instance of Modal.\n   * @param {*} element\n   * @param {*} modalType\n   * @param {*} modalID\n   * @memberof Modal\n   */\n  constructor(content, modalType, modalID) {\n    this.modal = createNodeFromHTML(modalTemplate);\n    this.modalScreen = createNodeFromHTML(modalScreenTemplate);\n    \n    this.modalID = modalID;\n    this.modalType = modalType;\n    this.modalContent = content;\n    \n    this.closeButton = this.modal.querySelector(modalCloseSel);\n\n    this.bindCustomMessageEvents();\n    this.subscribeToEvents();\n\n    bodyElement.appendChild(this.modal);\n    bodyElement.appendChild(this.modalScreen);\n\n    if (this.modalType === \"inpage\") {\n      this.displayPageContentInModal();\n    } else if (this.modalType === \"image\") {\n      this.displaySmartImageInModal();\n    } else if (this.modalType === \"iframe\") {\n      this.displayContentInModal();\n    }\n\n    PubSub.publish(\"modal/opened\");\n  }\n\n  /**\n   *\n   *\n   * @memberof Modal\n   */\n  displaySmartImageInModal () {\n    this.modal.classList.add(\"cp_Modal--image\");\n\n    const modalContent = this.modal.querySelector(modalContentSel);\n    modalContent.appendChild(this.modalContent);\n\n    //bodyElement.classList.add(\"modalDisplayed\");\n    \n    this.positionModal();\n    PubSub.publish(Events.messages.contentChange, this.modalContent);\n  }\n\n  /**\n   *\n   *\n   * @memberof Modal\n   */\n  positionModal () {\n    this.modal.classList.add(\"is_Displayed\");\n  }\n\n  /**\n   *\n   *\n   * @memberof Modal\n   */\n  activateModal () {\n    this.modal.classList.add(\"is_Loaded\");\n    this.positionModal();\n\n    // Site.analytics.trackPageEvent(\"Modal Image\", \"Modal Opened\", \"Image ID: \" + thisModalID);\n\n    // let delayPosition = setTimeout(this.positionModal.bind(this), 1000);\n  }\n\n  /**\n   *\n   *\n   * @memberof Modal\n   */\n  closeModal () {\n    \n    bodyElement.removeChild(this.modal); \n    bodyElement.removeChild(this.modalScreen);\n  }\n\n\n  /**\n   * \n   *\n   * @memberof Modal\n   */\n  bindCustomMessageEvents () {\n    this.modal.addEventListener(\n      \"closeModal\",\n      this.closeModal.bind(this)\n    );\n\n    this.modal.addEventListener(\n      \"updatelayout\",\n      this.positionModal.bind(this)\n    );\n\n    this.modal.addEventListener(\n      \"activateModal\",\n      this.activateModal.bind(this)\n    );\n\n    this.modalScreen.addEventListener(\n      \"closeModal\",\n      this.closeModal.bind(this)\n    );\n  }\n\n  /**\n   * Subscribe object to Global Messages\n   * @function\n   */\n  subscribeToEvents () {\n\n    // PubSub.subscribe(Events.messages.resize, () => {\n    //   this.modal.dispatchEvent(Events.createCustomEvent(\"updatelayout\"));\n    // });\n\n    // PubSub.subscribe(Events.messages.contentChange, () => {\n    //   this.modal.dispatchEvent(Events.createCustomEvent(\"updatelayout\"));\n    // });\n\n    PubSub.subscribe(Events.messages.imageLoaded, () => {\n      this.modal.dispatchEvent(Events.createCustomEvent(\"activateModal\"));\n    });\n  }\n\n}\n\n/**\n * ModalLinkManager - Class for managing links that generate page modals\n *\n * @class ModalLinkManager\n */\nclass ModalLinkManager {\n  /**\n   *Creates an instance of ModalLinkManager.\n   * @memberof ModalLinkManager\n   */\n  constructor() {\n    this.modalLinkContent = document.createElement(\"div\");\n    this.modalLinkContent.classList.add(\"cp_Modal__contentHolder\");\n\n    // Call initial methods\n    this.subscribeToEvents();\n  }\n\n  /**\n   *\n   *\n   * @param {object} data\n   * @memberof ModalLinkManager\n   */\n  createModalContent(linkElement) {\n    const modalLink = linkElement;\n    const modalLinkID = modalLink.getAttribute(\"id\") || \"unidentified\";\n    const modalLinkURL = modalLink.getAttribute(\"href\");\n    const modalMode = modalLink.dataset.modalSource;\n\n    let modalContent;\n\n    \n\n    this.modalLinkContent.innerHTML = \"\";\n\n    if (modalMode === \"iframe\") {\n      modalContent = `<iframe src=\"${modalLinkURL}\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>`;\n    } else if (modalMode === \"image\") {\n      modalContent = `<div class=\"ob_Media--image ob_Media\" data-image-load=\"pageload\" data-image-config='{ \"type\" : \"inline\", \"reload\" : true }' data-src-set='{ \"max\": \"${modalLinkURL}\"}'></div>`;\n    }\n\n    if (modalContent) {\n      this.modalLinkContent.innerHTML = modalContent;\n      this.createModal(modalMode, modalLinkID);\n    } \n  }\n\n  /**\n   *\n   *\n   * @memberof ModalLinkManager\n   */\n  createModal(mode, id) {\n    const newModal = new Modal(this.modalLinkContent, mode, id);\n  }\n\n  /**\n   *\n   *\n   * @memberof ModalLinkManager\n   */\n  subscribeToEvents() {\n    PubSub.subscribe(\"display/modal\", (topic, data) => {\n      let modalLink;\n\n      if (data.target.matches(modalLinkSel)) {\n        modalLink = data.target;\n      } else {\n        modalLink = data.target.closest(modalLinkSel);\n      } \n\n      if(modalLink) {\n        this.createModalContent(modalLink);\n      }\n    });\n  }\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components managed within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", modalCloseSel, \"closeModal\");\n  Events.delegate(\"click\", modalScreenSel, \"closeModal\");\n  Events.global(\"click\", modalLinkSel, \"display/modal\", true);\n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n\n  const newModalLinkManager = new ModalLinkManager();\n}\n\nexport default { initModule: initModule };\n","// Navigation Menu \n\n////////////////////\n// Module Imports //\n////////////////////\n\nimport PubSub from \"pubsub-js\";\n\nimport Events from \"Modules/Events\";\n\n//////////////////////\n// Module Constants //\n//////////////////////\n\nconst selMainNav = \"[data-main-nav=component]\";\nconst selMainNavToggle = \"[data-main-nav=toggle]\";\nconst selMainNavToggleGlobal = \"[data-main-nav=component] [data-main-nav=toggle]\";\nconst selMainNavMenu = \"[data-main-nav=menu]\";\nconst selMainNavCloseGlobal = \"[data-main-nav=component] [data-main-nav=close]\";\nconst selMainNavSecondaryMenuContainer = \".cp_MainNav__secondaryMenu\";\nconst selMainNavSecondaryItem = \"li.secondary\";\nconst menuShowHideTransitionTime = 350;\n\n\n////////////////////////////////\n// Module Classes & Functions //\n////////////////////////////////\n\n\nclass MainNavToggle {\n  constructor(element) {\n    this.menuToggle = element;\n\n    this.bindCustomMessageEvents();\n    this.subscribeToEvents();\n  }\n\n  toggleMenu() {\n    document.body.classList.toggle(\"nav_Visible\");\n  }\n\n  openMenu() {}\n\n  closeMenu() {}\n\n  subscribeToEvents() {} \n\n  /**\n   * Add event handler for main navigation toggle\n   * @function\n   */\n  bindCustomMessageEvents() {\n    this.menuToggle.addEventListener(\"toggleMainNav\", this.toggleMenu.bind(this));\n    this.menuToggle.addEventListener(\"openMainNav\", this.openMenu.bind(this));\n    this.menuToggle.addEventListener(\"closeMainNav\", this.closeMenu.bind(this));\n  }\n}\n\n\nfunction initialiseMainMenu() {\n  const navToggle = document.querySelectorAll(selMainNavToggle);\n\n  Array.prototype.forEach.call(navToggle, element => {\n    const newMainNavToggle = new MainNavToggle(element);\n  });\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components managed within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selMainNavToggle, \"toggleMainNav\");\n}\n\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n  initialiseMainMenu();\n}\n\nexport default { initModule: initModule };","// Show/Hide Components module\n\"use strict\";\n\n////////////////////\n// Module Imports //\n////////////////////\n\nimport PubSub from \"pubsub-js\";\nimport Events from \"Modules/Events\";\nimport Animation from \"Modules/Animation\"; \n \n////////////////////// \n// Module Constants //\n////////////////////// \n\nconst selComponent = \"[data-showhide=component]\";\nconst selAction = \"[data-showhide=component] [data-showhide=toggle]\";\nconst selContent = \"[data-showhide=content]\";\nconst displayClass = \"is_Open\";\n\n////////////////////////////////\n// Module Classes & Functions //\n////////////////////////////////\n\n/**\n * ShowHide - Class representing a Show/Hide DOM component\n */\nclass ShowHide {\n  /**\n   * constructor - Description\n   *\n   * @param {object} element DOM element\n   *\n   * @returns {type} Description\n   */\n  constructor(element) {\n    // Set properties\n    this.element = element;\n    this.action = this.element.querySelectorAll(selAction)[0];\n    this.content = this.element.querySelectorAll(selContent)[0];\n    this.config = this.element.getAttribute(\"data-showhide-config\");\n    this.animate = this.config.animate || false;\n    this.speed = this.config.speed || 200;\n    this.startState = this.config.open || false;\n\n    // Call initial methods\n    this.bindCustomMessageEvents();\n    this.setStartState();\n  }\n\n  /**\n   * toggleControl - Description\n   *\n   * @param {type} event Description\n   */\n  toggleControl(event) {\n    event.preventDefault();\n\n    if (this.element.classList.contains(displayClass)) {\n      Animation.collapseElement(this.content);\n      this.element.classList.remove(displayClass);\n    } else {\n      Animation.expandElement(this.content);\n      this.element.classList.add(displayClass);\n    }\n\n    PubSub.publish(Events.messages.contentChange);\n  }\n\n  /**\n   * setStartState - Description\n   *\n   * @returns {type} Description\n   */\n  setStartState() {\n    if (this.startState === true) {\n      Animation.expandElement(this.content);\n      this.element.classList.add(displayClass);\n    }\n  }\n\n  /**\n   * bindCustomMessageEvents - Description\n   *\n   * @returns {type} Description\n   */\n  bindCustomMessageEvents() {\n    this.element.addEventListener(\n      \"toggleShowHide\",\n      this.toggleControl.bind(this)\n    );\n  }\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selAction, \"toggleShowHide\");\n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n\n  // Find and initialise Show/Hide components using the ShowHide class\n  const showHideComponents = document.querySelectorAll(selComponent);\n  \n  Array.prototype.forEach.call(showHideComponents, element => {\n    const newShowHide = new ShowHide(element);\n  });\n}\n\nexport default {\n  initModule: initModule\n};","// Tab Components module\n\"use strict\";\n\n////////////////////\n// Module Imports //\n////////////////////\n\n// import PubSub from \"pubsub-js\";\nimport Events from \"Modules/Events\";\nimport { indexOfNode } from \"Modules/Utils\";\n \n//////////////////////\n// Module Constants //\n////////////////////// \n\nconst selTabComponent = \"[data-tabs=component]\";\nconst selTabPanel = \"[data-tabs=panel]\";\nconst selTabControl = \"[data-tabs=control]\";\n// const selTabControlCurrent = \".current[data-tabs=control]\";\nconst selTabControlGlobal = \"[data-tabs=component] [data-tabs=control]\";\n// const selTabAdvance = \"[data-tabs=advance]\";\n\n// TODO: Add functionality to dynamically create tab controls\n// const tabControlsContainerTemplate = `\n//   <div class=\"cp_TabControls\" data-tabs=\"controls\">\n//     <a class=\"tabAdvance--prev tabAdvance\" href=\"#\" data-tab-advance=\"p\">Prev</a>\n//     <a class=\"tabAdvance--next tabAdvance\" href=\"#\" data-tab-advance=\"n\">Next</a>\n//     <div class=\"tabs\"></div>\n//   </div>`; \n// const tabControlTemplate = `<a href=\"#\" class=\"tabLink\" data-tabs=\"control\"></a>`;\n\n////////////////////////////////\n// Module Classes & Functions // \n////////////////////////////////\n\nclass TabbedContent {\n  constructor(element) {\n    this.component = element;\n    this.config = JSON.parse(this.component.dataset.tabsConfig);\n    this.tabControls = this.component.querySelectorAll(selTabControl);\n    this.tabPanels = this.component.querySelectorAll(selTabPanel);\n    this.currentIndex = 0;\n    this.currentTab;\n\n    this.bindCustomMessageEvents(); \n    this.setupTabs();\n  }\n\n  setupTabs() {\n    if (this.config.build) {\n      // TODO: Add functionality to build tab controls dynamically\n    }\n\n    this.tabPanels.item(this.currentIndex).classList.add('is_Current');\n    this.tabControls.item(this.currentIndex).classList.add(\"is_Current\");\n  }\n\n  updateCurrentTab(event) {\n    const targetIndex = indexOfNode(event.target);\n\n    this.tabPanels.item(this.currentIndex).classList.remove(\"is_Current\");\n    this.tabControls.item(this.currentIndex).classList.remove(\"is_Current\");\n\n    this.tabPanels.item(targetIndex).classList.add(\"is_Current\");\n    this.tabControls.item(targetIndex).classList.add(\"is_Current\");\n\n    this.currentIndex = targetIndex;\n  }\n\n  bindCustomMessageEvents() {\n    this.component.addEventListener(\"selectTab\", this.updateCurrentTab.bind(this));\n  }\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selTabControlGlobal, \"selectTab\");\n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents(); \n\n  // Find and initialise Show/Hide components using the ShowHide class\n  const tabComponents = document.querySelectorAll(selTabComponent);\n\n  tabComponents.forEach((element) => {\n    const newTabbedContent = new TabbedContent(element);\n  });\n}\n\nexport default {\n  initModule: initModule\n};","// Utilities Module\n\"use strict\";\n\n/**\n * Returns the nearest parent element matching the selector, with the option to return the starting element if it matches.\n * source: https://blog.wearecolony.com/a-year-without-jquery/\n * @param   {Element}       el\n * @param   {string}        selector\n * @param   {boolean}       [includeSelf]\n * @return  {Element|null}\n */\nexport function closestParent(el, selector, includeSelf) {\n  let parent = el.parentNode;\n\n  if (includeSelf && el.matches(selector)) {\n    return el;\n  }\n\n  while (parent && parent !== document.body) {\n    if (parent.matches && parent.matches(selector)) {\n      return parent;\n    } else if (parent.parentNode) {\n      parent = parent.parentNode;\n    } else {\n      return null;\n    }\n  }\n\n  return null;\n}\n\nexport function indexOfNode(node) {\n  const child = node;\n  const parent = child.parentNode;\n  // The equivalent of parent.children.indexOf(child)\n  const index = Array.prototype.indexOf.call(parent.children, child);  \n\n  return index;\n}\n\n/**\n *\n *\n * @export\n * @param {*} htmlString\n * @returns\n */\nexport function createNodeFromHTML(htmlString) {\n  const div = document.createElement('div');\n  div.innerHTML = htmlString.trim();\n  // Change this to div.childNodes to support multiple top-level nodes\n  return div.firstChild;\n}\n\nexport function wrapElement(el, wrapper) {\n  el.parentNode.insertBefore(wrapper, el);\n  wrapper.appendChild(el);\n}\n\n/**\n * isElementInView - Description\n *\n * @param {Element} element Description\n *\n * @returns {boolean} Description\n */\nexport function isElementInView(element) {\n  const windowHeight = window.innerHeight;\n  const scrollTop = window.scrollY;\n  const elementOffset = element.getBoundingClientRect();\n  const elementTop = elementOffset.top;\n  const elementHeight = element.offsetHeight;\n\n  if ( elementTop < (scrollTop + windowHeight)  && (elementTop + elementHeight) > scrollTop ) {\n    return true;\n  } else if ( (elementTop + elementHeight) > scrollTop && (elementTop + elementHeight) < (scrollTop + windowHeight) ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * outerWidth - function that returns the width of an element including horizontal margins\n *\n * @param {Element} el - Single DOM element\n *\n * @returns {int} calculated outer width of el\n */\nexport function outerWidth(el) {\n  let width = parseInt(el.offsetWidth);\n  const style = getComputedStyle(el);\n\n  width += parseInt(style.marginLeft) + parseInt(style.marginRight);\n  return width;\n}\n\n/**\n * outerWidth function that returns the height of an element including vertical margins\n *\n * @export\n * @param {Element} el\n * @returns\n */\nexport function outerHeight(el) {\n  let height = parseInt(el.offsetHeight);\n  const style = getComputedStyle(el);\n\n  height += parseInt(style.marginTop) + parseInt(style.marginBottom);\n  return height;\n}\n\n/**\n * Read a page's GET URL query string variables and return them as an associative array.\n * @return  {Array}\n */\nexport function getURLQueryString() {\n  const queryStringValues = [];\n  let hash;\n  const hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n  for (let i = 0; i < hashes.length; i++) {\n    hash = hashes[i].split('=');\n    queryStringValues.push(hash[0]);\n    queryStringValues[hash[0]] = hash[1];\n  }\n  return queryStringValues;\n}\n\n/**\n * decodeCharacters - Convert any encoded characters in a string to their unencoded versions - e.g. &amp to &\n *\n * @param {string} text\n *\n * @returns {string}\n */\nexport function decodeCharacters(text) {\n  const elem = document.createElement('textarea');\n  elem.innerHTML = text;\n  return elem.value;\n}\n\n/**\n * resetStyles - Remove the style attribute from an element\n *\n * @param {type} element Description\n *\n * @returns {type} Description\n */\nexport function resetStyles(element) {\n  element.setAttribute('style', '');\n}\n\n/**\n * getOffset - Return an object with the top and left offsets of an element\n *\n * @param {element} el Single DOM element\n *\n * @returns {object} Simple object with left and top properties\n */\nexport function getOffset(el) {\n  const elementBoundary = el.getBoundingClientRect();\n  return {\n    left: elementBoundary.left + window.scrollX,\n    top: elementBoundary.top + window.scrollY\n  }\n}\n\n/**\n * ready - Call a function when the page DOM is loaded and complete\n *\n * @param {function} fn Description\n */\nexport function ready(fn) {\n  if (document.attachEvent ? document.readyState === \"complete\" : document.readyState !== \"loading\"){\n    fn();\n  } else {\n    document.addEventListener('DOMContentLoaded', fn);\n  }\n}\n\nexport default {\n  closestParent: closestParent,\n  isElementInView: isElementInView,\n  outerWidth: outerWidth,\n  outerHeight: outerHeight,\n  getURLQueryString: getURLQueryString,\n  decodeCharacters: decodeCharacters,\n  resetStyles: resetStyles,\n  getOffset: getOffset,\n  createNodeFromHTML: createNodeFromHTML,\n  indexOfNode: indexOfNode,\n  wrapElement: wrapElement,\n  ready: ready\n};\n","// Video JS Module\n\n////////////////////\n// Module Imports //\n////////////////////\n\nimport PubSub from \"pubsub-js\";\n\nimport Events from \"Modules/Events\";\nimport { isElementInView as inView } from \"Modules/Utils\";\n\n//////////////////////\n// Module Constants //\n//////////////////////\n\nconst selInlineVideo = \"[data-inline-video=container]\";\nconst selInlineVideoPlayer = \"[data-inline-video=player]\";\nconst selInlineVideoToggle = \"[data-inline-video=toggle]\";\n\nconst observerOptions = {\n  root: null,\n  rootMargin: \"0px\",\n  threshold: 0\n};\n\nlet videoObserver; \n\n////////////////////////////////\n// Module Classes & Functions //\n////////////////////////////////\n\n/**\n *\n *\n * @class InlineVideo\n */\nclass InlineVideo {\n  /**\n   *Creates an instance of InlineVideo.\n   * @param {node} element\n   * @memberof InlineVideo\n   */\n  constructor(element) {\n    this.videoContainer = element;\n    this.videoPlayer = this.videoContainer.querySelector(selInlineVideoPlayer);\n    this.videoSource = this.videoPlayer.querySelector('source');\n    this.videoURL = this.videoSource.dataset.src;\n\n    this.isLoaded = false;\n    this.isPlaying = false;\n    this.isReached = false;\n    this.isLoaded = false;\n    this.userPause = false;\n\n    if (typeof (window.IntersectionObserver) !== 'undefined') {\n      videoObserver.observe(this.videoContainer);\n    }\n\n    // Call initial methods\n    this.bindCustomMessageEvents();\n    this.subscribeToEvents();\n\n    //this.loadVideo();\n  }\n\n  /**\n   *\n   *\n   * @memberof InlineVideo\n   */\n  loadVideo () {\n    if(!this.isLoaded){\n      this.videoPlayer.setAttribute(\"src\", this.videoURL);\n      this.videoPlayer.load();\n      this.isLoaded = true;\n    }\n  }\n\n  /**\n   *\n   *\n   * @memberof InlineVideo\n   */\n  playVideo() {\n    this.isPlaying = true;\n    this.videoContainer.classList.add('is_Playing');\n  }\n\n  /**\n   *\n   *\n   * @memberof InlineVideo\n   */\n  pauseVideo() {\n    this.isPlaying = false;\n    this.videoContainer.classList.remove(\"is_Playing\");\n  }\n\n  /**\n   *\n   *\n   * @memberof InlineVideo\n   */\n  togglePlayback() { \n    if(this.isPlaying) {\n      this.videoPlayer.pause();\n    } else {\n      this.videoPlayer.play();\n    }\n  }\n\n  /**\n   * bindCustomMessageEvents - Binds custom event listeners to the Smart Image DOM Element\n   *\n   */\n  bindCustomMessageEvents() {\n    this.videoContainer.addEventListener(\"videoInView\", this.loadVideo.bind(this));\n    this.videoContainer.addEventListener(\"loadVideo\", this.loadVideo.bind(this));\n\n    this.videoPlayer.addEventListener(\"play\", this.playVideo.bind(this));\n    this.videoPlayer.addEventListener(\"pause\", this.pauseVideo.bind(this));\n    //this.videoPlayer.addEventListener(\"ended\", this.resetVideo.bind(this));\n\n    this.videoContainer.addEventListener(\"playbackToggled\", this.togglePlayback.bind(this));\n  }\n\n  /**\n   * subscribeToEvents - Subscribes the component to global messages and sets the component's responses via internal custom events\n   *\n   */\n  subscribeToEvents() {   \n    // Fallback to scroll event detection if browser doesn't support IntersectionObserver\n    if (typeof (window.IntersectionObserver) === 'undefined') {\n      PubSub.subscribe(Events.messages.scroll, () => {\n        if (inView(this.videoContainer) && !this.isLoaded){\n          this.videoContainer.dispatchEvent(Events.createCustomEvent(\"videoInView\"));\n        }\n      });\n    }\n  }\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components managed within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selInlineVideoToggle, \"playbackToggled\");\n}\n\n/**\n *\n *\n */\nfunction initialiseVideoPlayers() {\n  const inlineVideos = document.querySelectorAll(selInlineVideo);\n  inlineVideos.forEach(element => {\n    const newInlineVideo = new InlineVideo(element);\n  });\n}\n\n/**\n *\n *\n * @param {*} entries\n * @param {*} observer\n */\nfunction handleIntersection(entries, observer) {\n  entries.forEach(function (entry) {\n    if (entry.intersectionRatio > 0) {\n      entry.target.dispatchEvent(Events.createCustomEvent(\"videoInView\"));\n    }\n  });\n}\n\n/**\n *\n *\n */\nfunction initialiseVideoObserver() {\n  if (typeof (window.IntersectionObserver) !== 'undefined') {\n    videoObserver = new IntersectionObserver(handleIntersection, observerOptions);\n  }\n}\n\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n\n  // Initialise an observer object to detect when smart image elements are in view\n  initialiseVideoObserver();\n\n  // Find and initialise Show/Hide components using the ShowHide class\n  initialiseVideoPlayers();\n\n}\n\nexport default { initModule: initModule };","module.exports = \"/dist/css/screen.css\";"],"sourceRoot":""}