{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/debounce/index.js","webpack:///./node_modules/delegate/src/closest.js","webpack:///./node_modules/delegate/src/delegate.js","webpack:///./node_modules/ev-emitter/ev-emitter.js","webpack:///./node_modules/imagesloaded/imagesloaded.js","webpack:///./node_modules/pubsub-js/src/pubsub.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/js/index.js","webpack:///./src/js/modules/Animation.js","webpack:///./src/js/modules/Events.js","webpack:///./src/js/modules/Image.js","webpack:///./src/js/modules/Modal.js","webpack:///./src/js/modules/Navigation.js","webpack:///./src/js/modules/Showhide.js","webpack:///./src/js/modules/Tabs.js","webpack:///./src/js/modules/Utils.js","webpack:///./src/js/modules/Video.js","webpack:///./src/scss/screen.scss"],"names":["initialiseComponentModules","initEvents","initNav","initShowhide","initImage","initModal","initVideo","initTabs","initCarousel","tables","document","querySelectorAll","forEach","wrapper","createElement","classList","add","wrapElement","element","ready","collapseElement","sectionHeight","scrollHeight","style","height","elementTransition","transition","requestAnimationFrame","expandElement","addEventListener","expansionEnds","removeEventListener","messages","createCustomEvent","eventName","eventData","customEvent","window","CustomEvent","detail","some","bubbles","createEvent","initCustomEvent","bindGlobalMessages","PubSub","publish","scroll","onresize","debounce","resize","createGlobalMessenger","eventType","selector","message","preventBubble","delegate","body","e","preventDefault","stopPropagation","createDelegatedEventListener","eventToTrigger","target","dispatchEvent","initModule","global","selSmartImage","selClickToLoadSmartImage","selPlaceholderImage","imageLoadingClass","imageLoadedClass","imageDisplayedClass","imageFlexClass","imageHiddenClass","observerOptions","root","rootMargin","threshold","imageObserver","SmartImage","smartImageElem","placeholderImage","querySelector","loadingMethod","dataset","imageLoad","config","JSON","parse","imageConfig","imageType","type","imageReloader","reload","imageTargetSel","imageTarget","imageLoaded","imageToAdd","srcSet","IntersectionObserver","observe","bindCustomMessageEvents","subscribeToEvents","getImageFile","loadImageIfInView","pageWidth","innerWidth","imageSrcKey","key","hasOwnProperty","parseInt","image","imageAlt","alt","imageWidth","width","imageClass","class","length","src","remove","removeAttribute","updateImageAttributes","insertBefore","setTimeout","unobserve","path","smartImage","imageBackgroundPos","position","imageBackgroundColor","backgroundColor","backgroundImage","Events","contentChange","thisImageUrl","calculateImageBreakpointToUse","imageLoader","imagesLoaded","on","displayImageInContainer","displayImageAsBackground","layoutChange","component","parentNode","inView","loadImage","loadSmartImage","bind","reloadImage","loadSmartImageOnClick","subscribe","load","breakChange","SmartImageFactory","data","smartImages","Array","prototype","call","newSmartImage","topic","createNewSmartImageObjects","contentDisplayed","displaySmartImages","delegateEvents","initialiseSmartImages","newSmartImageFactory","handleIntersection","entries","observer","entry","intersectionRatio","initialiseImageObserver","modalTemplate","modalScreenTemplate","modalComponentSel","modalLinkSel","modalCloseSel","modalContentSel","modalScreenSel","bodyElement","getElementsByTagName","Modal","content","modalType","modalID","modal","createNodeFromHTML","modalScreen","modalContent","closeButton","appendChild","displayPageContentInModal","displaySmartImageInModal","displayContentInModal","positionModal","removeChild","closeModal","activateModal","ModalLinkManager","modalLinkContent","linkElement","modalLink","modalLinkID","getAttribute","modalLinkURL","modalMode","modalSource","innerHTML","createModal","mode","id","newModal","matches","closest","createModalContent","newModalLinkManager","selMainNav","selMainNavToggle","selMainNavToggleGlobal","selMainNavMenu","selMainNavCloseGlobal","selMainNavSecondaryMenuContainer","selMainNavSecondaryItem","menuShowHideTransitionTime","MainNavToggle","menuToggle","toggle","toggleMenu","openMenu","closeMenu","initialiseMainMenu","navToggle","newMainNavToggle","selComponent","selAction","selContent","displayClass","ShowHide","action","animate","speed","startState","open","setStartState","event","contains","Animation","toggleControl","showHideComponents","newShowHide","selTabComponent","selTabPanel","selTabControl","selTabControlGlobal","TabbedContent","tabsConfig","tabControls","tabPanels","currentIndex","currentTab","setupTabs","build","item","targetIndex","indexOfNode","updateCurrentTab","tabComponents","newTabbedContent","closestParent","el","includeSelf","parent","node","child","index","indexOf","children","htmlString","div","trim","firstChild","isElementInView","windowHeight","innerHeight","scrollTop","scrollY","elementOffset","getBoundingClientRect","elementTop","top","elementHeight","offsetHeight","outerWidth","offsetWidth","getComputedStyle","marginLeft","marginRight","outerHeight","marginTop","marginBottom","getURLQueryString","queryStringValues","hash","hashes","location","href","slice","split","i","push","decodeCharacters","text","elem","value","resetStyles","setAttribute","getOffset","elementBoundary","left","scrollX","fn","attachEvent","readyState","selInlineVideo","selInlineVideoPlayer","selInlineVideoToggle","videoObserver","InlineVideo","videoContainer","videoPlayer","videoSource","videoURL","isLoaded","isPlaying","isReached","userPause","pause","play","loadVideo","playVideo","pauseVideo","togglePlayback","initialiseVideoPlayers","inlineVideos","newInlineVideo","initialiseVideoObserver"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;ACrEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AChCA,cAAc,mBAAO,CAAC,yDAAW;;AAEjC;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,qBAAqB;AAChC,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC7EA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO,IAAyC;AAChD;AACA,IAAI,oCAAQ,OAAO;AAAA;AAAA;AAAA;AAAA,oGAAE;AACrB,GAAG,MAAM,EAMN;;AAEH,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;;;;;;AC/GD;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;;AAEA;;AAEA,OAAO,IAAyC;AAChD;AACA,IAAI,iCAAQ;AACZ,MAAM,2FAAuB;AAC7B,KAAK,mCAAE;AACP;AACA,KAAK;AAAA,oGAAC;AACN,GAAG,MAAM,EAYN;;AAEH,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,iCAAiC;AAC5C,WAAW,mBAAmB;AAC9B,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,KAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,qBAAqB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC;;;;;;;;;;;;ACxXD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,2BAA2B,eAAe,EAAE;;AAE5C;AACA,KAAK,UAAU,IAA2B;AAC1C;AACA,8CAA8C;AAC9C;AACA,gCAAgC;AAChC,0CAA0C;AAC1C;;AAEA,CAAC;AACD;;AAEA,qBAAqB;AACrB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,gBAAgB;AAChB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,gBAAgB;AAChB,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,WAAW;AAC1B,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,WAAW;AAC1B,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;AC1SD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA,SAASA,0BAAT,GAAsC;AACpCC,mEAAUA;AACVC,uEAAOA;AACPC,qEAAYA;AACZC,kEAASA;AACTC,kEAASA;AACTC,kEAASA;AACTC,iEAAQA;AACRC,iEAAYA;;AAEZ;AACA;AACA;AACA;;AAEA,MAAMC,SAASC,SAASC,gBAAT,CAA0B,iBAA1B,CAAf;;AAEAF,SAAOG,OAAP,CAAe,mBAAW;A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","file":"js/site.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \".\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","var DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n","var closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n","/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, window */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\n\"use strict\";\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice(0);\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( var i=0; i < listeners.length; i++ ) {\n    var listener = listeners[i]\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n};\n\nreturn EvEmitter;\n\n}));\n","/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( typeof window !== 'undefined' ? window : this,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n'use strict';\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  var queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = extend( {}, this.options );\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});\n","/**\n * Copyright (c) 2010,2011,2012,2013,2014 Morgan Roderick http://roderick.dk\n * License: MIT - http://mrgnrdrck.mit-license.org\n *\n * https://github.com/mroderick/PubSubJS\n */\n\n(function (root, factory){\n    'use strict';\n\n    var PubSub = {};\n    root.PubSub = PubSub;\n\n    var define = root.define;\n\n    factory(PubSub);\n\n    // AMD support\n    if (typeof define === 'function' && define.amd){\n        define(function() { return PubSub; });\n\n        // CommonJS and Node.js module support\n    } else if (typeof exports === 'object'){\n        if (module !== undefined && module.exports) {\n            exports = module.exports = PubSub; // Node.js specific `module.exports`\n        }\n        exports.PubSub = PubSub; // CommonJS module 1.1.1 spec\n        module.exports = exports = PubSub; // CommonJS\n    }\n\n}(( typeof window === 'object' && window ) || this, function (PubSub){\n    'use strict';\n\n    var messages = {},\n        lastUid = -1;\n\n    function hasKeys(obj){\n        var key;\n\n        for (key in obj){\n            if ( obj.hasOwnProperty(key) ){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Returns a function that throws the passed exception, for use as argument for setTimeout\n     * @alias throwException\n     * @function\n     * @param { Object } ex An Error object\n     */\n    function throwException( ex ){\n        return function reThrowException(){\n            throw ex;\n        };\n    }\n\n    function callSubscriberWithDelayedExceptions( subscriber, message, data ){\n        try {\n            subscriber( message, data );\n        } catch( ex ){\n            setTimeout( throwException( ex ), 0);\n        }\n    }\n\n    function callSubscriberWithImmediateExceptions( subscriber, message, data ){\n        subscriber( message, data );\n    }\n\n    function deliverMessage( originalMessage, matchedMessage, data, immediateExceptions ){\n        var subscribers = messages[matchedMessage],\n            callSubscriber = immediateExceptions ? callSubscriberWithImmediateExceptions : callSubscriberWithDelayedExceptions,\n            s;\n\n        if ( !messages.hasOwnProperty( matchedMessage ) ) {\n            return;\n        }\n\n        for (s in subscribers){\n            if ( subscribers.hasOwnProperty(s)){\n                callSubscriber( subscribers[s], originalMessage, data );\n            }\n        }\n    }\n\n    function createDeliveryFunction( message, data, immediateExceptions ){\n        return function deliverNamespaced(){\n            var topic = String( message ),\n                position = topic.lastIndexOf( '.' );\n\n            // deliver the message as it is now\n            deliverMessage(message, message, data, immediateExceptions);\n\n            // trim the hierarchy and deliver message to each level\n            while( position !== -1 ){\n                topic = topic.substr( 0, position );\n                position = topic.lastIndexOf('.');\n                deliverMessage( message, topic, data, immediateExceptions );\n            }\n        };\n    }\n\n    function messageHasSubscribers( message ){\n        var topic = String( message ),\n            found = Boolean(messages.hasOwnProperty( topic ) && hasKeys(messages[topic])),\n            position = topic.lastIndexOf( '.' );\n\n        while ( !found && position !== -1 ){\n            topic = topic.substr( 0, position );\n            position = topic.lastIndexOf( '.' );\n            found = Boolean(messages.hasOwnProperty( topic ) && hasKeys(messages[topic]));\n        }\n\n        return found;\n    }\n\n    function publish( message, data, sync, immediateExceptions ){\n        message = (typeof message === 'symbol') ? message.toString() : message;\n\n        var deliver = createDeliveryFunction( message, data, immediateExceptions ),\n            hasSubscribers = messageHasSubscribers( message );\n\n        if ( !hasSubscribers ){\n            return false;\n        }\n\n        if ( sync === true ){\n            deliver();\n        } else {\n            setTimeout( deliver, 0 );\n        }\n        return true;\n    }\n\n    /**\n     * Publishes the message, passing the data to it's subscribers\n     * @function\n     * @alias publish\n     * @param { String } message The message to publish\n     * @param {} data The data to pass to subscribers\n     * @return { Boolean }\n     */\n    PubSub.publish = function( message, data ){\n        return publish( message, data, false, PubSub.immediateExceptions );\n    };\n\n    /**\n     * Publishes the the message synchronously, passing the data to it's subscribers\n     * @function\n     * @alias publishSync\n     * @param { String } message The message to publish\n     * @param {} data The data to pass to subscribers\n     * @return { Boolean }\n     */\n    PubSub.publishSync = function( message, data ){\n        return publish( message, data, true, PubSub.immediateExceptions );\n    };\n\n    /**\n     * Subscribes the passed function to the passed message. Every returned token is unique and should be stored if you need to unsubscribe\n     * @function\n     * @alias subscribe\n     * @param { String } message The message to subscribe to\n     * @param { Function } func The function to call when a new message is published\n     * @return { String }\n     */\n    PubSub.subscribe = function( message, func ){\n        if ( typeof func !== 'function'){\n            return false;\n        }\n\n        message = (typeof message === 'symbol') ? message.toString() : message;\n\n        // message is not registered yet\n        if ( !messages.hasOwnProperty( message ) ){\n            messages[message] = {};\n        }\n\n        // forcing token as String, to allow for future expansions without breaking usage\n        // and allow for easy use as key names for the 'messages' object\n        var token = 'uid_' + String(++lastUid);\n        messages[message][token] = func;\n        \n        // return token for unsubscribing\n        return token;\n    };\n\n    /**\n     * Subscribes the passed function to the passed message once\n     * @function\n     * @alias subscribeOnce\n     * @param { String } message The message to subscribe to\n     * @param { Function } func The function to call when a new message is published\n     * @return { PubSub }\n     */\n    PubSub.subscribeOnce = function( message, func ){\n        var token = PubSub.subscribe( message, function(){\n            // before func apply, unsubscribe message\n            PubSub.unsubscribe( token );\n            func.apply( this, arguments );\n        });\n        return PubSub;\n    };\n\n    /**\n     * Clears all subscriptions\n     * @function\n     * @public\n     * @alias clearAllSubscriptions\n     */\n    PubSub.clearAllSubscriptions = function clearAllSubscriptions(){\n        messages = {};\n    };\n\n    /**\n     * Clear subscriptions by the topic\n     * @function\n     * @public\n     * @alias clearAllSubscriptions\n     */\n    PubSub.clearSubscriptions = function clearSubscriptions(topic){\n        var m;\n        for (m in messages){\n            if (messages.hasOwnProperty(m) && m.indexOf(topic) === 0){\n                delete messages[m];\n            }\n        }\n    };\n\n    /**\n     * Removes subscriptions\n     *\n     * - When passed a token, removes a specific subscription.\n     *\n\t * - When passed a function, removes all subscriptions for that function\n     *\n\t * - When passed a topic, removes all subscriptions for that topic (hierarchy)\n     * @function\n     * @public\n     * @alias subscribeOnce\n     * @param { String | Function } value A token, function or topic to unsubscribe from\n     * @example // Unsubscribing with a token\n     * var token = PubSub.subscribe('mytopic', myFunc);\n     * PubSub.unsubscribe(token);\n     * @example // Unsubscribing with a function\n     * PubSub.unsubscribe(myFunc);\n     * @example // Unsubscribing from a topic\n     * PubSub.unsubscribe('mytopic');\n     */\n    PubSub.unsubscribe = function(value){\n        var descendantTopicExists = function(topic) {\n                var m;\n                for ( m in messages ){\n                    if ( messages.hasOwnProperty(m) && m.indexOf(topic) === 0 ){\n                        // a descendant of the topic exists:\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n            isTopic    = typeof value === 'string' && ( messages.hasOwnProperty(value) || descendantTopicExists(value) ),\n            isToken    = !isTopic && typeof value === 'string',\n            isFunction = typeof value === 'function',\n            result = false,\n            m, message, t;\n\n        if (isTopic){\n            PubSub.clearSubscriptions(value);\n            return;\n        }\n\n        for ( m in messages ){\n            if ( messages.hasOwnProperty( m ) ){\n                message = messages[m];\n\n                if ( isToken && message[value] ){\n                    delete message[value];\n                    result = value;\n                    // tokens are unique, so we can just stop here\n                    break;\n                }\n\n                if (isFunction) {\n                    for ( t in message ){\n                        if (message.hasOwnProperty(t) && message[t] === value){\n                            delete message[t];\n                            result = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    };\n}));\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","\"use strict\";\n\nimport { ready, wrapElement } from \"Modules/Utils\";\nimport { initModule as initShowhide } from \"Modules/Showhide\";\nimport { initModule as initEvents } from \"Modules/Events\";\nimport { initModule as initModal } from \"Modules/Modal\";\nimport { initModule as initImage } from \"Modules/Image\";\nimport { initModule as initVideo } from \"Modules/Video\";\nimport { initModule as initNav } from \"Modules/Navigation\";\nimport { initModule as initTabs } from \"Modules/Tabs\";\nimport { initModule as initCarousel } from \"Modules/Tabs\";\n\n/** \n * initialiseComponentModules - call module init functions\n *\n * @returns {type} Description\n */ \nfunction initialiseComponentModules() {\n  initEvents();\n  initNav();\n  initShowhide(); \n  initImage();\n  initModal();\n  initVideo();\n  initTabs();\n  initCarousel();\n\n  // Wrap tables in container to allow overflow scroll\n  // This is a small enough bit of functionality to put on it's own here.\n  // But should be moved if more layout functionality warrants the creation\n  // of a Layout module\n\n  const tables = document.querySelectorAll('.tx_Prose table');\n\n  tables.forEach(element => {\n    const wrapper = document.createElement('div');\n    wrapper.classList.add('ob_Table');\n    wrapElement(element,wrapper);\n  });\n}\n\nready(initialiseComponentModules);\n","/** Animation module - functions to aid animating page elements */\n\"use strict\";\n\n//////////////////////\n// Module Functions //\n//////////////////////\n\n/**\n * collapseElement - Collapses an element by setting its height to 0.\n *\n * @param {DOMElement} element - A single DOM element\n */\nexport function collapseElement(element) {\n  // get the height of the element's inner content, regardless of its actual size\n  const sectionHeight = element.scrollHeight;\n  element.style.height = sectionHeight + \"px\";\n\n  // temporarily disable all css transitions\n  const elementTransition = element.style.transition;\n  element.style.transition = '';\n  \n  // on the next frame (as soon as the previous style change has taken effect),\n  // explicitly set the element's height to its current pixel height, so we\n  // aren't transitioning out of 'auto'\n  requestAnimationFrame(() => {\n    element.style.height = sectionHeight + 'px';\n    element.style.transition = elementTransition;\n\n    // on the next frame (as soon as the previous style change has taken effect),\n    // have the element transition to height: 0\n    requestAnimationFrame(() => {\n      element.style.height = 0 + 'px';\n    });\n  });\n}\n\n/**\n * expandElement - Expands an element with a height of 0 to its natural height by calculating this value.\n *\n * @param {DOMElement} element - A single DOM element\n */\nexport function expandElement(element) {\n  // get the height of the element's inner content, regardless of its actual size\n  var sectionHeight = element.scrollHeight;\n\n  // have the element transition to the height of its inner content\n  element.style.height = sectionHeight + 'px';\n\n  // when the next css transition finishes (which should be the one we just triggered)\n  element.addEventListener('transitionend', function expansionEnds() {\n    // remove this event listener so it only gets triggered once\n    element.removeEventListener(\"transitionend\", expansionEnds);\n    // remove \"height\" from the element's inline styles, so it can return to its initial value\n    element.style.height = null;\n  });\n}\n\nexport default {\n  collapseElement: collapseElement,\n  expandElement: expandElement\n}","////////////////////\n// Module Imports //\n////////////////////\n\"use strict\";\n\nimport debounce from \"debounce\";\nimport delegate from \"delegate\";\nimport PubSub from \"pubsub-js\";\n\n//////////////////////\n// Module Constants //\n//////////////////////\n\n/**\n * Object containing global message strings\n * @constant\n */\nexport const messages = {\n  \"resize\": \"page/resize\",\n  \"scroll\": \"page/scroll\",\n  \"load\": \"page/load\",\n  \"contentChange\": \"page-content/change\",\n  \"contentDisplayed\": \"page-content/displayed\",\n  \"layoutChange\": \"layout/change\",\n  \"breakChange\" : \"breakpoint/change\",\n  \"imageLoaded\" : \"image/loaded\"\n}\n\n/////////////////////////\n// Classes & Functions //\n/////////////////////////\n\n/**\n * createCustomEvent - Returns a custom event object\n *\n * @param {string} eventName Name of the custom event\n * @param {object} eventData Associated data passed through as part of the event object\n *\n * @returns {object} Custom Event object\n */\nfunction createCustomEvent(eventName, eventData) {\n  let customEvent;\n\n  if (window.CustomEvent) {\n    customEvent = new CustomEvent(eventName, {detail: {some: eventData}, bubbles: true});\n  } else {\n    customEvent = document.createEvent('CustomEvent');\n    customEvent.initCustomEvent(eventName, true, true, {some: eventData});\n  }\n\n  return customEvent;\n}\n\n/**\n * bindGlobalMessages - Binds event listeners to global browser events and fires global messages in response\n *\n * @returns {type} Description\n */\nfunction bindGlobalMessages() {\n  // Handle page scroll\n  window.addEventListener('scroll', function() {\n    // Publish global message\n    PubSub.publish(messages.scroll);\n  });\n\n  // Handle debounced resize\n  window.onresize = debounce(function() {\n    // Publish global  message\n    PubSub.publish(messages.resize);\n  }, 200);\n}\n\n\n/**\n * createGlobalMessenger\n *\n * @export\n * @param {string} eventType\n * @param {string} selector\n * @param {string} message\n * @param {boolean} preventBubble\n */\nexport function createGlobalMessenger(eventType, selector, message, preventBubble) {\n  delegate(document.body, selector, eventType, (e) => {\n    if(preventBubble) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    \n    PubSub.publish(message, e);\n  }, false);\n}\n\n/**\n * createDelegatedEventListener - Simple factory function to bind a common delegated event listener to the <body> element\n *\n * @param {string} eventType      the event type we're listening for\n * @param {string} selector       the selector for the element event is triggered on\n * @param {string} eventToTrigger custom event we want to send back to target element\n */\nexport function createDelegatedEventListener(eventType, selector, eventToTrigger) {\n  delegate(document.body, selector, eventType, (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    let customEvent = createCustomEvent(eventToTrigger, null);\n    e.target.dispatchEvent(customEvent);\n  }, false);\n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  bindGlobalMessages();\n}\n\nexport default {\n  initModule: initModule,\n  messages:messages,\n  delegate:createDelegatedEventListener,\n  global: createGlobalMessenger,\n  createCustomEvent:createCustomEvent,\n}\n","// Image Components module\n\"use strict\";\n\n////////////////////\n// Module Imports //\n////////////////////\n\nimport PubSub from \"pubsub-js\";\nimport imagesLoaded from \"imagesloaded\";\n\nimport Events from \"Modules/Events\";\nimport { isElementInView as inView } from \"Modules/Utils\";\n\n//////////////////////\n// Module Constants //\n//////////////////////\n\n// Selectors\nconst selSmartImage = \"[data-image-load]\";\nconst selClickToLoadSmartImage = \"[data-image-load=click] img.placeholder\";\nconst selPlaceholderImage = \"img\";\n\n// Classes\nconst imageLoadingClass = \"ob_Media--loading\";\nconst imageLoadedClass = \"ob_Media--loaded\";\nconst imageDisplayedClass = \"ob_Media--displayed\";\nconst imageFlexClass = \"ob_Media--flex\";\nconst imageHiddenClass = \"ob_Media--isHidden\";\n\n// Image Observer\nconst observerOptions  = {\n  root: null,\n  rootMargin: \"0px\",\n  threshold: 0\n};\n\nlet imageObserver;\n\n////////////////////////////////\n// Module Classes & Functions //\n////////////////////////////////\n\n/**\n * SmartImage - Class representing a Smart Image component that loads optimised images based on screen size\n */\nclass SmartImage {\n  constructor(element) {\n    // Set properties\n    this.smartImageElem = element;\n    this.placeholderImage = this.smartImageElem.querySelector(selPlaceholderImage);\n    this.loadingMethod = this.smartImageElem.dataset.imageLoad;\n    this.config = JSON.parse(this.smartImageElem.dataset.imageConfig);\n    this.imageType = this.config.type || false;\n    this.imageReloader = this.config.reload || false;\n    this.imageTargetSel = this.smartImageElem.dataset.imageTarget || null;\n    this.imageLoaded = false;\n    this.imageToAdd = document.createElement(\"img\");\n    this.srcSet = JSON.parse(this.smartImageElem.dataset.srcSet) || {};\n\n    // Add Image Element to observer\n    if(this.loadingMethod === 'view') {\n      if (typeof (window.IntersectionObserver) !== 'undefined') {\n        imageObserver.observe(this.smartImageElem);\n      }\n    }\n\n    // Call initial methods\n    this.bindCustomMessageEvents();\n    this.subscribeToEvents();\n\n    if (this.loadingMethod === \"pageload\") {\n      this.getImageFile();\n    } else if (this.loadingMethod === \"view\") {\n      this.loadImageIfInView();\n    }\n  }\n\n  /**\n   * calculateImageBreakpointToUse - Description\n   *\n   * @returns {string} Description\n   */\n  calculateImageBreakpointToUse() {\n    const pageWidth = window.innerWidth;\n    let imageSrcKey = \"max\";\n\n    for (let key in this.srcSet) {\n      if (this.srcSet.hasOwnProperty(key)) {\n        // If the current key is not 'max' check that the page width is less than it,\n        // and it is less than the current value for imageSrcKey\n        if (key !== \"max\") {\n          // If imageSrcKey is not set to 'max' check if the key\n          // is greater or equal than the page width and also if it\n          // is less than the current value of imageSrcKey\n          if (imageSrcKey !== \"max\") {\n            if (parseInt(key) >= pageWidth && parseInt(key) < imageSrcKey) {\n              imageSrcKey = key;\n            }\n          } else {\n            // If imageSrcKey is still set to 'max' just check if the key\n            // is greater or equal than the page width\n            if (parseInt(key) > pageWidth) {\n              imageSrcKey = key;\n            }\n          }\n        }\n      }\n    }\n\n    return imageSrcKey;\n  }\n\n  /**\n   * updateImageAttributes - Description\n   *\n   * @param {Element} image <img> html element\n   *\n   */\n  updateImageAttributes(image) {\n    const imageAlt = this.smartImageElem.dataset.alt || \"image\";\n    const imageWidth = this.smartImageElem.dataset.width;\n    const imageClass = this.smartImageElem.dataset.class;\n\n    if (imageAlt.length > 0) {\n      image.alt = imageAlt;\n    }\n\n    if (imageWidth) {\n      image.width = imageWidth;\n    }\n\n    if (imageClass) {\n      image.classList.add(imageClass);\n    }\n  }\n\n  /**\n   * displayImageInContainer - Description\n   *\n   */\n  displayImageInContainer() {\n    // Add 'loading' class to SmartImage container\n    this.smartImageElem.classList.add(imageLoadingClass);\n\n    if (this.placeholderImage) {\n      this.placeholderImage.src = this.imageToAdd.src;\n      this.placeholderImage.classList.remove(\"placeholder\");\n      this.placeholderImage.removeAttribute(\"width\");\n      this.placeholderImage.removeAttribute(\"height\");\n\n      this.updateImageAttributes(this.placeholderImage);\n    } else {\n      this.updateImageAttributes(this.imageToAdd);\n\n      if (this.imageTargetSel !== null) {\n        //this.smartImageElem.parent().find(imageTargetSel).eq(0).append(this.imageToAdd);\n      } else {\n        this.smartImageElem.insertBefore(this.imageToAdd, null);\n      }\n      this.placeholderImage = this.imageToAdd;\n    }\n\n    this.smartImageElem.classList.add(imageLoadedClass);\n    // Need to allow browser a moment to process the addition of the image before displaying it\n    window.setTimeout(() => {\n      this.smartImageElem.classList.add(imageDisplayedClass);\n      PubSub.publish(\"content/update\");\n    }, 50);\n\n    this.imageLoaded = true;\n    imageObserver.unobserve(this.smartImageElem);\n  }\n\n  /**\n   * displayImageAsBackground - Description\n   *\n   * @param {string} path Description\n   *\n   */\n  displayImageAsBackground(path) {\n    const smartImage = \"url(\" + path + \")\";\n    const imageBackgroundPos = this.smartImageElem.dataset.position;\n    const imageBackgroundColor = this.smartImageElem.dataset.backgroundColor;\n\n    this.smartImageElem.classList.add(imageLoadedClass);\n    this.smartImageElem.style.backgroundImage = smartImage;\n    this.smartImageElem.classList.add(imageBackgroundPos);\n    this.smartImageElem.style.backgroundColor = imageBackgroundColor;\n\n    window.setTimeout(() => {\n      this.smartImageElem.classList.add(imageDisplayedClass);\n      PubSub.publish(Events.messages.contentChange);\n    }, 50);\n\n    this.imageLoaded = true;\n    imageObserver.unobserve(this.smartImageElem);\n  }\n\n  /**\n   * getImageFile - Description\n   *\n   */\n  getImageFile() {\n    const thisImageUrl = this.srcSet[this.calculateImageBreakpointToUse()];\n\n    //Site.utils.cl(\"image url: \" + thisImageUrl);\n\n    if (thisImageUrl !== \"none\") {\n      this.smartImageElem.classList.remove(\"is_Hidden\");\n      this.imageToAdd.src = thisImageUrl;\n\n      const imageLoader = imagesLoaded(this.imageToAdd);\n\n      if (this.imageType === \"inline\") {\n        imageLoader.on(\"done\", () => {\n          this.smartImageElem.classList.remove(imageLoadingClass);\n          this.displayImageInContainer(this.imageToAdd);\n        });\n      } else if (this.imageType === \"background\") {\n        // The imagesLoaded function is called for image we want to load.\n        // There is no initial callback because everything we want to do can wait\n        // until the image is fully downloaded.\n        imageLoader.on(\"done\", () => {\n          this.smartImageElem.classList.add(imageFlexClass);\n          this.displayImageAsBackground(thisImageUrl);\n        });\n      }\n    } else {\n      this.smartImageElem.classList.add(imageHiddenClass);\n    }\n\n    PubSub.publish(Events.messages.imageLoaded);\n    PubSub.publish(Events.messages.layoutChange);\n  }\n\n  /**\n   * Load and display a smart image - use this when being in view doesn't matter\n   */\n  loadImage() {\n    if (this.imageType === \"inline\") {\n      if (this.imageLoaded === false || this.imageReloader === true) {\n        this.getImageFile(this.smartImageElem);\n      }\n    } else if (this.imageType === \"background\") {\n      this.smartImageElem.classList.add(imageFlexClass);\n      if (this.imageLoaded === false || this.imageReloader === true) {\n        this.getImageFile(this.smartImageElem);\n      }\n    }\n  }\n\n  /**\n   * loadImageIfInView - Check if\n   */\n  loadImageIfInView() {\n    let component = this.smartImageElem;\n\n    if (this.imageType === \"background\") {\n      component = component.parentNode;\n    }\n\n    if ( inView(component) && (this.imageLoaded === false || this.imageReloader === true)) {\n      this.getImageFile(this.smartImageElem);\n    }\n  }\n\n  /**\n   * loadSmartImage - Description\n   *\n   * @param {event} e Description\n   */\n  loadSmartImage(e) {\n    e.preventDefault();\n\n    if (this.imageLoaded === false) {\n      this.loadImageIfInView(this.smartImageElem);\n    }\n  }\n\n  /**\n   * reloadImage - Description\n   *\n   * @param {event} e Description\n   */\n  reloadImage(e) {\n    e.preventDefault();\n\n    if (this.imageLoaded === true && this.imageReloader === true) {\n      this.getImageFile();\n    }\n  }\n\n  /**\n   * loadSmartImageOnClick - Description\n   *\n   * @param {event} e Description\n   */\n  loadSmartImageOnClick(e) { \n    e.preventDefault();\n\n    if (this.imageLoaded === false) {\n      this.loadImage(this.smartImageElem);\n    }\n  }\n\n  /**\n   * bindCustomMessageEvents - Binds custom event listeners to the Smart Image DOM Element\n   *\n   */\n  bindCustomMessageEvents() {\n    this.smartImageElem.addEventListener(\n      \"siLoad\",\n      this.loadSmartImage.bind(this)\n    );\n\n    this.smartImageElem.addEventListener(\n      \"imageInView\",\n      this.loadSmartImage.bind(this)\n    );\n    \n    this.smartImageElem.addEventListener(\n      \"siReload\",\n      this.reloadImage.bind(this)\n    );\n\n    this.smartImageElem.addEventListener(\n      \"siClickLoad\",\n      this.loadSmartImageOnClick.bind(this)\n    );\n  }\n\n  /**\n   * subscribeToEvents - Subscribes the component to global messages and sets the component's responses via internal custom events\n   *\n   */\n  subscribeToEvents() {\n    if (this.loadingMethod === \"view\") {     \n      // Fallback to scroll event detection if browser doesn't support IntersectionObserver\n      if (typeof(window.IntersectionObserver) === 'undefined') {\n        // PubSub.subscribe(Events.messages.scroll, () => {\n        //   this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siLoad\"));\n        // }); \n      }\n      \n      PubSub.subscribe(Events.messages.load, () => {\n        this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siLoad\"));\n      });\n\n      PubSub.subscribe(Events.messages.layoutChange, () => {\n        this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siLoad\"));\n      });\n    }\n\n    PubSub.subscribe(Events.messages.resize, () => {\n      this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siReload\"));\n    });\n\n    PubSub.subscribe(Events.messages.breakChange, () => {\n      this.smartImageElem.dispatchEvent(Events.createCustomEvent(\"siReload\"));\n    });\n  }\n}\n\n\nclass SmartImageFactory {\n  constructor () {\n    this.subscribeToEvents();\n  }\n\n  createNewSmartImageObjects (data) {\n    const smartImages = data.querySelectorAll(selSmartImage);\n    Array.prototype.forEach.call(smartImages, element => {\n      const newSmartImage = new SmartImage(element);\n    });\n  }\n\n  displaySmartImages () {\n    \n  }\n\n  subscribeToEvents () {\n    // On a content change, the newly-added elements are passed as parameters to a function\n    // that finds any smartImages and initialises controlling objects for each\n    PubSub.subscribe(Events.messages.contentChange, (topic, data) => {\n      this.createNewSmartImageObjects(data);\n    });\n\n    PubSub.subscribe(Events.messages.contentDisplayed, (topic, data) => {\n      this.displaySmartImages(data);\n    });\n  } \n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components managed within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selClickToLoadSmartImage, \"siClickLoad\");\n}\n\n\nfunction initialiseSmartImages() {\n  const smartImages = document.querySelectorAll(selSmartImage);\n\n  smartImages.forEach(element => {\n    const newSmartImage = new SmartImage(element);\n  });\n\n  const newSmartImageFactory = new SmartImageFactory();\n}\n\nfunction handleIntersection (entries, observer) {\n  entries.forEach(function(entry) {\n    if (entry.intersectionRatio > 0) {\n      entry.target.dispatchEvent(Events.createCustomEvent(\"imageInView\"));\n    }\n  });\n}\n\nfunction initialiseImageObserver() { \n  if (typeof (window.IntersectionObserver) !== 'undefined') {\n    imageObserver = new IntersectionObserver(handleIntersection, observerOptions);\n  }  \n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n\n  // Initialise an observer object to detect when smart image elements are in view\n  initialiseImageObserver();\n\n  // Find and initialise Show/Hide components using the ShowHide class\n  initialiseSmartImages(); \n\n}\n\nexport default { initModule: initModule };\n","// Modal Components Module\n\"use strict\";\n\nimport PubSub from \"pubsub-js\";\nimport Events from \"Modules/Events\";\nimport { createNodeFromHTML } from \"Modules/Utils\"; \n\nconst modalTemplate = `\n  <div class=\"cp_Modal\" aria-modal=\"true\">\n    <div id=\"confirmation-popup\" class=\"cp_Modal__inner\">\n      <div class=\"cp_Modal__content\">\n        <div class=\"cp_Modal__close\">\n          <a class=\"cp_Modal__closeLink\" href=\"#\" title=\"Close this modal\">Close</a>\n        </div>\n      </div>\n    </div>\n  </div>`;\n\nconst modalScreenTemplate = `<div class='cp_ModalScreen'></div>`;\n\nconst modalComponentSel = \".cp_Modal\";\nconst modalLinkSel = \"[data-modal-source]\";\nconst modalCloseSel = \".cp_Modal__closeLink\";\nconst modalContentSel = \".cp_Modal__content\";\nconst modalScreenSel = \".cp_ModalScreen\";\n\nconst bodyElement = document.getElementsByTagName('body')[0];\n\n/** \n *\n *\n * @class Modal\n */\nclass Modal {\n\n  /**\n   *Creates an instance of Modal.\n   * @param {*} element\n   * @param {*} modalType\n   * @param {*} modalID\n   * @memberof Modal\n   */\n  constructor(content, modalType, modalID) {\n    this.modal = createNodeFromHTML(modalTemplate);\n    this.modalScreen = createNodeFromHTML(modalScreenTemplate);\n    \n    this.modalID = modalID;\n    this.modalType = modalType;\n    this.modalContent = content;\n    \n    this.closeButton = this.modal.querySelector(modalCloseSel);\n\n    this.bindCustomMessageEvents();\n    this.subscribeToEvents();\n\n    bodyElement.appendChild(this.modal);\n    bodyElement.appendChild(this.modalScreen);\n\n    if (this.modalType === \"inpage\") {\n      this.displayPageContentInModal();\n    } else if (this.modalType === \"image\") {\n      this.displaySmartImageInModal();\n    } else if (this.modalType === \"iframe\") {\n      this.displayContentInModal();\n    }\n\n    PubSub.publish(\"modal/opened\");\n  }\n\n  /**\n   *\n   *\n   * @memberof Modal\n   */\n  displaySmartImageInModal () {\n    this.modal.classList.add(\"cp_Modal--image\");\n\n    const modalContent = this.modal.querySelector(modalContentSel);\n    modalContent.appendChild(this.modalContent);\n\n    //bodyElement.classList.add(\"modalDisplayed\");\n    \n    this.positionModal();\n    PubSub.publish(Events.messages.contentChange, this.modalContent);\n  }\n\n  /**\n   *\n   *\n   * @memberof Modal\n   */\n  positionModal () {\n    this.modal.classList.add(\"is_Displayed\");\n  }\n\n  /**\n   *\n   *\n   * @memberof Modal\n   */\n  activateModal () {\n    this.modal.classList.add(\"is_Loaded\");\n    this.positionModal();\n\n    // Site.analytics.trackPageEvent(\"Modal Image\", \"Modal Opened\", \"Image ID: \" + thisModalID);\n\n    // let delayPosition = setTimeout(this.positionModal.bind(this), 1000);\n  }\n\n  /**\n   *\n   *\n   * @memberof Modal\n   */\n  closeModal () {\n    \n    bodyElement.removeChild(this.modal); \n    bodyElement.removeChild(this.modalScreen);\n  }\n\n\n  /**\n   * \n   *\n   * @memberof Modal\n   */\n  bindCustomMessageEvents () {\n    this.modal.addEventListener(\n      \"closeModal\",\n      this.closeModal.bind(this)\n    );\n\n    this.modal.addEventListener(\n      \"updatelayout\",\n      this.positionModal.bind(this)\n    );\n\n    this.modal.addEventListener(\n      \"activateModal\",\n      this.activateModal.bind(this)\n    );\n\n    this.modalScreen.addEventListener(\n      \"closeModal\",\n      this.closeModal.bind(this)\n    );\n  }\n\n  /**\n   * Subscribe object to Global Messages\n   * @function\n   */\n  subscribeToEvents () {\n\n    // PubSub.subscribe(Events.messages.resize, () => {\n    //   this.modal.dispatchEvent(Events.createCustomEvent(\"updatelayout\"));\n    // });\n\n    // PubSub.subscribe(Events.messages.contentChange, () => {\n    //   this.modal.dispatchEvent(Events.createCustomEvent(\"updatelayout\"));\n    // });\n\n    PubSub.subscribe(Events.messages.imageLoaded, () => {\n      this.modal.dispatchEvent(Events.createCustomEvent(\"activateModal\"));\n    });\n  }\n\n}\n\n/**\n * ModalLinkManager - Class for managing links that generate page modals\n *\n * @class ModalLinkManager\n */\nclass ModalLinkManager {\n  /**\n   *Creates an instance of ModalLinkManager.\n   * @memberof ModalLinkManager\n   */\n  constructor() {\n    this.modalLinkContent = document.createElement(\"div\");\n    this.modalLinkContent.classList.add(\"cp_Modal__contentHolder\");\n\n    // Call initial methods\n    this.subscribeToEvents();\n  }\n\n  /**\n   *\n   *\n   * @param {object} data\n   * @memberof ModalLinkManager\n   */\n  createModalContent(linkElement) {\n    const modalLink = linkElement;\n    const modalLinkID = modalLink.getAttribute(\"id\") || \"unidentified\";\n    const modalLinkURL = modalLink.getAttribute(\"href\");\n    const modalMode = modalLink.dataset.modalSource;\n\n    let modalContent;\n\n    \n\n    this.modalLinkContent.innerHTML = \"\";\n\n    if (modalMode === \"iframe\") {\n      modalContent = `<iframe src=\"${modalLinkURL}\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>`;\n    } else if (modalMode === \"image\") {\n      modalContent = `<div class=\"ob_Media--image ob_Media\" data-image-load=\"pageload\" data-image-config='{ \"type\" : \"inline\", \"reload\" : true }' data-src-set='{ \"max\": \"${modalLinkURL}\"}'></div>`;\n    }\n\n    if (modalContent) {\n      this.modalLinkContent.innerHTML = modalContent;\n      this.createModal(modalMode, modalLinkID);\n    } \n  }\n\n  /**\n   *\n   *\n   * @memberof ModalLinkManager\n   */\n  createModal(mode, id) {\n    const newModal = new Modal(this.modalLinkContent, mode, id);\n  }\n\n  /**\n   *\n   *\n   * @memberof ModalLinkManager\n   */\n  subscribeToEvents() {\n    PubSub.subscribe(\"display/modal\", (topic, data) => {\n      let modalLink;\n\n      if (data.target.matches(modalLinkSel)) {\n        modalLink = data.target;\n      } else {\n        modalLink = data.target.closest(modalLinkSel);\n      } \n\n      if(modalLink) {\n        this.createModalContent(modalLink);\n      }\n    });\n  }\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components managed within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", modalCloseSel, \"closeModal\");\n  Events.delegate(\"click\", modalScreenSel, \"closeModal\");\n  Events.global(\"click\", modalLinkSel, \"display/modal\", true);\n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n\n  const newModalLinkManager = new ModalLinkManager();\n}\n\nexport default { initModule: initModule };\n","// Navigation Menu \n\n////////////////////\n// Module Imports //\n////////////////////\n\nimport PubSub from \"pubsub-js\";\n\nimport Events from \"Modules/Events\";\n\n//////////////////////\n// Module Constants //\n//////////////////////\n\nconst selMainNav = \"[data-main-nav=component]\";\nconst selMainNavToggle = \"[data-main-nav=toggle]\";\nconst selMainNavToggleGlobal = \"[data-main-nav=component] [data-main-nav=toggle]\";\nconst selMainNavMenu = \"[data-main-nav=menu]\";\nconst selMainNavCloseGlobal = \"[data-main-nav=component] [data-main-nav=close]\";\nconst selMainNavSecondaryMenuContainer = \".cp_MainNav__secondaryMenu\";\nconst selMainNavSecondaryItem = \"li.secondary\";\nconst menuShowHideTransitionTime = 350;\n\n\n////////////////////////////////\n// Module Classes & Functions //\n////////////////////////////////\n\n\nclass MainNavToggle {\n  constructor(element) {\n    this.menuToggle = element;\n\n    this.bindCustomMessageEvents();\n    this.subscribeToEvents();\n  }\n\n  toggleMenu() {\n    document.body.classList.toggle(\"nav_Visible\");\n  }\n\n  openMenu() {}\n\n  closeMenu() {}\n\n  subscribeToEvents() {} \n\n  /**\n   * Add event handler for main navigation toggle\n   * @function\n   */\n  bindCustomMessageEvents() {\n    this.menuToggle.addEventListener(\"toggleMainNav\", this.toggleMenu.bind(this));\n    this.menuToggle.addEventListener(\"openMainNav\", this.openMenu.bind(this));\n    this.menuToggle.addEventListener(\"closeMainNav\", this.closeMenu.bind(this));\n  }\n}\n\n\nfunction initialiseMainMenu() {\n  const navToggle = document.querySelectorAll(selMainNavToggle);\n\n  Array.prototype.forEach.call(navToggle, element => {\n    const newMainNavToggle = new MainNavToggle(element);\n  });\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components managed within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selMainNavToggle, \"toggleMainNav\");\n}\n\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n  initialiseMainMenu();\n}\n\nexport default { initModule: initModule };","// Show/Hide Components module\n\"use strict\";\n\n////////////////////\n// Module Imports //\n////////////////////\n\nimport PubSub from \"pubsub-js\";\nimport Events from \"Modules/Events\";\nimport Animation from \"Modules/Animation\"; \n \n////////////////////// \n// Module Constants //\n////////////////////// \n\nconst selComponent = \"[data-showhide=component]\";\nconst selAction = \"[data-showhide=component] [data-showhide=toggle]\";\nconst selContent = \"[data-showhide=content]\";\nconst displayClass = \"is_Open\";\n\n////////////////////////////////\n// Module Classes & Functions //\n////////////////////////////////\n\n/**\n * ShowHide - Class representing a Show/Hide DOM component\n */\nclass ShowHide {\n  /**\n   * constructor - Description\n   *\n   * @param {object} element DOM element\n   *\n   * @returns {type} Description\n   */\n  constructor(element) {\n    // Set properties\n    this.element = element;\n    this.action = this.element.querySelectorAll(selAction)[0];\n    this.content = this.element.querySelectorAll(selContent)[0];\n    this.config = this.element.getAttribute(\"data-showhide-config\");\n    this.animate = this.config.animate || false;\n    this.speed = this.config.speed || 200;\n    this.startState = this.config.open || false;\n\n    // Call initial methods\n    this.bindCustomMessageEvents();\n    this.setStartState();\n  }\n\n  /**\n   * toggleControl - Description\n   *\n   * @param {type} event Description\n   */\n  toggleControl(event) {\n    event.preventDefault();\n\n    if (this.element.classList.contains(displayClass)) {\n      Animation.collapseElement(this.content);\n      this.element.classList.remove(displayClass);\n    } else {\n      Animation.expandElement(this.content);\n      this.element.classList.add(displayClass);\n    }\n\n    PubSub.publish(Events.messages.contentChange);\n  }\n\n  /**\n   * setStartState - Description\n   *\n   * @returns {type} Description\n   */\n  setStartState() {\n    if (this.startState === true) {\n      Animation.expandElement(this.content);\n      this.element.classList.add(displayClass);\n    }\n  }\n\n  /**\n   * bindCustomMessageEvents - Description\n   *\n   * @returns {type} Description\n   */\n  bindCustomMessageEvents() {\n    this.element.addEventListener(\n      \"toggleShowHide\",\n      this.toggleControl.bind(this)\n    );\n  }\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selAction, \"toggleShowHide\");\n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n\n  // Find and initialise Show/Hide components using the ShowHide class\n  const showHideComponents = document.querySelectorAll(selComponent);\n  \n  Array.prototype.forEach.call(showHideComponents, element => {\n    const newShowHide = new ShowHide(element);\n  });\n}\n\nexport default {\n  initModule: initModule\n};","// Tab Components module\n\"use strict\";\n\n////////////////////\n// Module Imports //\n////////////////////\n\n// import PubSub from \"pubsub-js\";\nimport Events from \"Modules/Events\";\nimport { indexOfNode } from \"Modules/Utils\";\n \n//////////////////////\n// Module Constants //\n////////////////////// \n\nconst selTabComponent = \"[data-tabs=component]\";\nconst selTabPanel = \"[data-tabs=panel]\";\nconst selTabControl = \"[data-tabs=control]\";\n// const selTabControlCurrent = \".current[data-tabs=control]\";\nconst selTabControlGlobal = \"[data-tabs=component] [data-tabs=control]\";\n// const selTabAdvance = \"[data-tabs=advance]\";\n\n// TODO: Add functionality to dynamically create tab controls\n// const tabControlsContainerTemplate = `\n//   <div class=\"cp_TabControls\" data-tabs=\"controls\">\n//     <a class=\"tabAdvance--prev tabAdvance\" href=\"#\" data-tab-advance=\"p\">Prev</a>\n//     <a class=\"tabAdvance--next tabAdvance\" href=\"#\" data-tab-advance=\"n\">Next</a>\n//     <div class=\"tabs\"></div>\n//   </div>`; \n// const tabControlTemplate = `<a href=\"#\" class=\"tabLink\" data-tabs=\"control\"></a>`;\n\n////////////////////////////////\n// Module Classes & Functions // \n////////////////////////////////\n\nclass TabbedContent {\n  constructor(element) {\n    this.component = element;\n    this.config = JSON.parse(this.component.dataset.tabsConfig);\n    this.tabControls = this.component.querySelectorAll(selTabControl);\n    this.tabPanels = this.component.querySelectorAll(selTabPanel);\n    this.currentIndex = 0;\n    this.currentTab;\n\n    this.bindCustomMessageEvents(); \n    this.setupTabs();\n  }\n\n  setupTabs() {\n    if (this.config.build) {\n      // TODO: Add functionality to build tab controls dynamically\n    }\n\n    this.tabPanels.item(this.currentIndex).classList.add('is_Current');\n    this.tabControls.item(this.currentIndex).classList.add(\"is_Current\");\n  }\n\n  updateCurrentTab(event) {\n    const targetIndex = indexOfNode(event.target);\n\n    this.tabPanels.item(this.currentIndex).classList.remove(\"is_Current\");\n    this.tabControls.item(this.currentIndex).classList.remove(\"is_Current\");\n\n    this.tabPanels.item(targetIndex).classList.add(\"is_Current\");\n    this.tabControls.item(targetIndex).classList.add(\"is_Current\");\n\n    this.currentIndex = targetIndex;\n  }\n\n  bindCustomMessageEvents() {\n    this.component.addEventListener(\"selectTab\", this.updateCurrentTab.bind(this));\n  }\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selTabControlGlobal, \"selectTab\");\n}\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents(); \n\n  // Find and initialise Show/Hide components using the ShowHide class\n  const tabComponents = document.querySelectorAll(selTabComponent);\n  \n  tabComponents.forEach((element) => {\n    const newTabbedContent = new TabbedContent(element);\n  });\n}\n\nexport default {\n  initModule: initModule\n};","// Utilities Module\n\"use strict\";\n\n/**\n * Returns the nearest parent element matching the selector, with the option to return the starting element if it matches.\n * source: https://blog.wearecolony.com/a-year-without-jquery/\n * @param   {Element}       el\n * @param   {string}        selector\n * @param   {boolean}       [includeSelf]\n * @return  {Element|null}\n */\nexport function closestParent(el, selector, includeSelf) {\n  let parent = el.parentNode;\n\n  if (includeSelf && el.matches(selector)) {\n    return el;\n  }\n\n  while (parent && parent !== document.body) {\n    if (parent.matches && parent.matches(selector)) {\n      return parent;\n    } else if (parent.parentNode) {\n      parent = parent.parentNode;\n    } else {\n      return null;\n    }\n  }\n\n  return null;\n}\n\nexport function indexOfNode(node) {\n  const child = node;\n  const parent = child.parentNode;\n  // The equivalent of parent.children.indexOf(child)\n  const index = Array.prototype.indexOf.call(parent.children, child);  \n\n  return index;\n}\n\n/**\n *\n *\n * @export\n * @param {*} htmlString\n * @returns\n */\nexport function createNodeFromHTML(htmlString) {\n  const div = document.createElement('div');\n  div.innerHTML = htmlString.trim();\n  // Change this to div.childNodes to support multiple top-level nodes\n  return div.firstChild;\n}\n\nexport function wrapElement(el, wrapper) {\n  el.parentNode.insertBefore(wrapper, el);\n  wrapper.appendChild(el);\n}\n\n/**\n * isElementInView - Description\n *\n * @param {Element} element Description\n *\n * @returns {boolean} Description\n */\nexport function isElementInView(element) {\n  const windowHeight = window.innerHeight;\n  const scrollTop = window.scrollY;\n  const elementOffset = element.getBoundingClientRect();\n  const elementTop = elementOffset.top;\n  const elementHeight = element.offsetHeight;\n\n  if ( elementTop < (scrollTop + windowHeight)  && (elementTop + elementHeight) > scrollTop ) {\n    return true;\n  } else if ( (elementTop + elementHeight) > scrollTop && (elementTop + elementHeight) < (scrollTop + windowHeight) ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * outerWidth - function that returns the width of an element including horizontal margins\n *\n * @param {Element} el - Single DOM element\n *\n * @returns {int} calculated outer width of el\n */\nexport function outerWidth(el) {\n  let width = parseInt(el.offsetWidth);\n  const style = getComputedStyle(el);\n\n  width += parseInt(style.marginLeft) + parseInt(style.marginRight);\n  return width;\n}\n\n/**\n * outerWidth function that returns the height of an element including vertical margins\n *\n * @export\n * @param {Element} el\n * @returns\n */\nexport function outerHeight(el) {\n  let height = parseInt(el.offsetHeight);\n  const style = getComputedStyle(el);\n\n  height += parseInt(style.marginTop) + parseInt(style.marginBottom);\n  return height;\n}\n\n/**\n * Read a page's GET URL query string variables and return them as an associative array.\n * @return  {Array}\n */\nexport function getURLQueryString() {\n  const queryStringValues = [];\n  let hash;\n  const hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n  for (let i = 0; i < hashes.length; i++) {\n    hash = hashes[i].split('=');\n    queryStringValues.push(hash[0]);\n    queryStringValues[hash[0]] = hash[1];\n  }\n  return queryStringValues;\n}\n\n/**\n * decodeCharacters - Convert any encoded characters in a string to their unencoded versions - e.g. &amp to &\n *\n * @param {string} text\n *\n * @returns {string}\n */\nexport function decodeCharacters(text) {\n  const elem = document.createElement('textarea');\n  elem.innerHTML = text;\n  return elem.value;\n}\n\n/**\n * resetStyles - Remove the style attribute from an element\n *\n * @param {type} element Description\n *\n * @returns {type} Description\n */\nexport function resetStyles(element) {\n  element.setAttribute('style', '');\n}\n\n/**\n * getOffset - Return an object with the top and left offsets of an element\n *\n * @param {element} el Single DOM element\n *\n * @returns {object} Simple object with left and top properties\n */\nexport function getOffset(el) {\n  const elementBoundary = el.getBoundingClientRect();\n  return {\n    left: elementBoundary.left + window.scrollX,\n    top: elementBoundary.top + window.scrollY\n  }\n}\n\n/**\n * ready - Call a function when the page DOM is loaded and complete\n *\n * @param {function} fn Description\n */\nexport function ready(fn) {\n  if (document.attachEvent ? document.readyState === \"complete\" : document.readyState !== \"loading\"){\n    fn();\n  } else {\n    document.addEventListener('DOMContentLoaded', fn);\n  }\n}\n\nexport default {\n  closestParent: closestParent,\n  isElementInView: isElementInView,\n  outerWidth: outerWidth,\n  outerHeight: outerHeight,\n  getURLQueryString: getURLQueryString,\n  decodeCharacters: decodeCharacters,\n  resetStyles: resetStyles,\n  getOffset: getOffset,\n  createNodeFromHTML: createNodeFromHTML,\n  indexOfNode: indexOfNode,\n  wrapElement: wrapElement,\n  ready: ready\n};\n","// Video JS Module\n\n////////////////////\n// Module Imports //\n////////////////////\n\nimport PubSub from \"pubsub-js\";\n\nimport Events from \"Modules/Events\";\nimport { isElementInView as inView } from \"Modules/Utils\";\n\n//////////////////////\n// Module Constants //\n//////////////////////\n\nconst selInlineVideo = \"[data-inline-video=container]\";\nconst selInlineVideoPlayer = \"[data-inline-video=player]\";\nconst selInlineVideoToggle = \"[data-inline-video=toggle]\";\n\nconst observerOptions = {\n  root: null,\n  rootMargin: \"0px\",\n  threshold: 0\n};\n\nlet videoObserver; \n\n////////////////////////////////\n// Module Classes & Functions //\n////////////////////////////////\n\n/**\n *\n *\n * @class InlineVideo\n */\nclass InlineVideo {\n  /**\n   *Creates an instance of InlineVideo.\n   * @param {node} element\n   * @memberof InlineVideo\n   */\n  constructor(element) {\n    this.videoContainer = element;\n    this.videoPlayer = this.videoContainer.querySelector(selInlineVideoPlayer);\n    this.videoSource = this.videoPlayer.querySelector('source');\n    this.videoURL = this.videoSource.dataset.src;\n\n    this.isLoaded = false;\n    this.isPlaying = false;\n    this.isReached = false;\n    this.isLoaded = false;\n    this.userPause = false;\n\n    if (typeof (window.IntersectionObserver) !== 'undefined') {\n      videoObserver.observe(this.videoContainer);\n    }\n\n    // Call initial methods\n    this.bindCustomMessageEvents();\n    this.subscribeToEvents();\n\n    //this.loadVideo();\n  }\n\n  /**\n   *\n   *\n   * @memberof InlineVideo\n   */\n  loadVideo () {\n    if(!this.isLoaded){\n      this.videoPlayer.setAttribute(\"src\", this.videoURL);\n      this.videoPlayer.load();\n      this.isLoaded = true;\n    }\n  }\n\n  /**\n   *\n   *\n   * @memberof InlineVideo\n   */\n  playVideo() {\n    this.isPlaying = true;\n    this.videoContainer.classList.add('is_Playing');\n  }\n\n  /**\n   *\n   *\n   * @memberof InlineVideo\n   */\n  pauseVideo() {\n    this.isPlaying = false;\n    this.videoContainer.classList.remove(\"is_Playing\");\n  }\n\n  /**\n   *\n   *\n   * @memberof InlineVideo\n   */\n  togglePlayback() { \n    if(this.isPlaying) {\n      this.videoPlayer.pause();\n    } else {\n      this.videoPlayer.play();\n    }\n  }\n\n  /**\n   * bindCustomMessageEvents - Binds custom event listeners to the Smart Image DOM Element\n   *\n   */\n  bindCustomMessageEvents() {\n    this.videoContainer.addEventListener(\"videoInView\", this.loadVideo.bind(this));\n    this.videoContainer.addEventListener(\"loadVideo\", this.loadVideo.bind(this));\n\n    this.videoPlayer.addEventListener(\"play\", this.playVideo.bind(this));\n    this.videoPlayer.addEventListener(\"pause\", this.pauseVideo.bind(this));\n    //this.videoPlayer.addEventListener(\"ended\", this.resetVideo.bind(this));\n\n    this.videoContainer.addEventListener(\"playbackToggled\", this.togglePlayback.bind(this));\n  }\n\n  /**\n   * subscribeToEvents - Subscribes the component to global messages and sets the component's responses via internal custom events\n   *\n   */\n  subscribeToEvents() {   \n    // Fallback to scroll event detection if browser doesn't support IntersectionObserver\n    if (typeof (window.IntersectionObserver) === 'undefined') {\n      PubSub.subscribe(Events.messages.scroll, () => {\n        if (inView(this.videoContainer) && !this.isLoaded){\n          this.videoContainer.dispatchEvent(Events.createCustomEvent(\"videoInView\"));\n        }\n      });\n    }\n  }\n}\n\n/**\n * delegateEvents - Create delegated event listeners for the components managed within this module\n *\n * @returns {type} Description\n */\nfunction delegateEvents() {\n  Events.delegate(\"click\", selInlineVideoToggle, \"playbackToggled\");\n}\n\n/**\n *\n *\n */\nfunction initialiseVideoPlayers() {\n  const inlineVideos = document.querySelectorAll(selInlineVideo);\n  inlineVideos.forEach(element => {\n    const newInlineVideo = new InlineVideo(element);\n  });\n}\n\n/**\n *\n *\n * @param {*} entries\n * @param {*} observer\n */\nfunction handleIntersection(entries, observer) {\n  entries.forEach(function (entry) {\n    if (entry.intersectionRatio > 0) {\n      entry.target.dispatchEvent(Events.createCustomEvent(\"videoInView\"));\n    }\n  });\n}\n\n/**\n *\n *\n */\nfunction initialiseVideoObserver() {\n  if (typeof (window.IntersectionObserver) !== 'undefined') {\n    videoObserver = new IntersectionObserver(handleIntersection, observerOptions);\n  }\n}\n\n\n/**\n * initModule - Initialise this module and the components contained in it\n *\n * @returns {type} Description\n */\nexport function initModule() {\n  // Create delegated event listeners for the components within this module\n  delegateEvents();\n\n  // Initialise an observer object to detect when smart image elements are in view\n  initialiseVideoObserver();\n\n  // Find and initialise Show/Hide components using the ShowHide class\n  initialiseVideoPlayers();\n\n}\n\nexport default { initModule: initModule };","module.exports = \"/dist/css/screen.css\";"],"sourceRoot":""}